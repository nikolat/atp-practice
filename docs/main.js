(()=>{"use strict";var e={890:e=>{var t,r,o,n,i=Object.create,a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,c=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,u=(e,t)=>{for(var r in t)a(e,r,{get:t[r],enumerable:!0})},l=(e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of p(t))d.call(e,n)||n===r||a(e,n,{get:()=>t[n],enumerable:!(o=s(t,n))||o.enumerable});return e},m=(t={"../../node_modules/iso-datestring-validator/dist/index.js"(e){(()=>{var t={d:(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};function o(e,t){return void 0===t&&(t="-"),new RegExp("^(?!0{4}"+t+"0{2}"+t+"0{2})((?=[0-9]{4}"+t+"(((0[^2])|1[0-2])|02(?="+t+"(([0-1][0-9])|2[0-8])))"+t+"[0-9]{2})|(?=((([13579][26])|([2468][048])|(0[48]))0{2})|([0-9]{2}((((0|[2468])[48])|[2468][048])|([13579][26])))"+t+"02"+t+"29))([0-9]{4})"+t+"(?!((0[469])|11)"+t+"31)((0[1,3-9]|1[0-2])|(02(?!"+t+"3)))"+t+"(0[1-9]|[1-2][0-9]|3[0-1])$").test(e)}function n(e){var t=/\D/.exec(e);return t?t[0]:""}function i(e,t,r){void 0===t&&(t=":"),void 0===r&&(r=!1);var o=new RegExp("^([0-1]|2(?=([0-3])|4"+t+"00))[0-9]"+t+"[0-5][0-9]("+t+"([0-5]|6(?=0))[0-9])?(.[0-9]{1,9})?$");if(!r||!/[Z+\-]/.test(e))return o.test(e);if(/Z$/.test(e))return o.test(e.replace("Z",""));var i,a,s,p=e.includes("+"),c=e.split(/[+-]/),d=c[0],u=c[1];return o.test(d)&&(i=u,a=p,void 0===(s=n(u))&&(s=":"),new RegExp(a?"^(0(?!(2"+s+"4)|0"+s+"3)|1(?=([0-1]|2(?="+s+"[04])|[34](?="+s+"0))))([03469](?="+s+"[03])|[17](?="+s+"0)|2(?="+s+"[04])|5(?="+s+"[034])|8(?="+s+"[04]))"+s+"([03](?=0)|4(?=5))[05]$":"^(0(?=[^0])|1(?=[0-2]))([39](?="+s+"[03])|[0-24-8](?="+s+"00))"+s+"[03]0$").test(i))}function a(e){var t=e.split("T"),r=t[0],a=t[1],s=o(r,n(r));if(!a)return!1;var p,c=(p=a.match(/([^Z+\-\d])(?=\d+\1)/),Array.isArray(p)?p[0]:"");return s&&i(a,c,!0)}function s(e,t){return void 0===t&&(t="-"),new RegExp("^[0-9]{4}"+t+"(0(?=[^0])|1(?=[0-2]))[0-9]$").test(e)}t.r(r),t.d(r,{isValidDate:()=>o,isValidISODateString:()=>a,isValidTime:()=>i,isValidYearMonth:()=>s});var p=e;for(var c in r)p[c]=r[c];r.__esModule&&Object.defineProperty(p,"__esModule",{value:!0})})()}},function(){return r||(0,t[p(t)[0]])((r={exports:{}}).exports,r),r.exports}),y={};u(y,{APP_BSKY_GRAPH:()=>kp,APP_BSKY_SYSTEM:()=>_p,AccountNS:()=>Tp,ActorNS:()=>Op,AdminNS:()=>Sp,AppBskyActorGetProfile:()=>Rn,AppBskyActorGetProfiles:()=>Cn,AppBskyActorGetSuggestions:()=>Sn,AppBskyActorProfile:()=>Ba,AppBskyActorRef:()=>Wa,AppBskyActorSearch:()=>En,AppBskyActorSearchTypeahead:()=>qn,AppBskyActorUpdateProfile:()=>Dn,AppBskyEmbedExternal:()=>es,AppBskyEmbedImages:()=>cs,AppBskyEmbedRecord:()=>vs,AppBskyFeedFeedViewPost:()=>Cs,AppBskyFeedGetAuthorFeed:()=>Vn,AppBskyFeedGetPostThread:()=>Gn,AppBskyFeedGetRepostedBy:()=>Jn,AppBskyFeedGetTimeline:()=>Yn,AppBskyFeedGetVotes:()=>ei,AppBskyFeedPost:()=>Ps,AppBskyFeedRepost:()=>Ws,AppBskyFeedSetVote:()=>ni,AppBskyFeedVote:()=>Js,AppBskyGraphAssertCreator:()=>Qs,AppBskyGraphAssertMember:()=>tp,AppBskyGraphAssertion:()=>op,AppBskyGraphConfirmation:()=>ap,AppBskyGraphFollow:()=>cp,AppBskyGraphGetFollowers:()=>ai,AppBskyGraphGetFollows:()=>pi,AppBskyGraphGetMutes:()=>di,AppBskyGraphMute:()=>li,AppBskyGraphUnmute:()=>yi,AppBskyNotificationGetCount:()=>hi,AppBskyNotificationList:()=>vi,AppBskyNotificationUpdateSeen:()=>ki,AppBskySystemActorUser:()=>lp,AppBskySystemDeclRef:()=>yp,AppBskySystemDeclaration:()=>gp,AppNS:()=>Np,AssertionRecord:()=>Wp,AtpAgent:()=>ec,AtpBaseClient:()=>Ap,AtpServiceClient:()=>Rp,AtprotoNS:()=>Cp,BlobNS:()=>$p,BskyNS:()=>Mp,COM_ATPROTO_ADMIN:()=>wp,COM_ATPROTO_REPORT:()=>xp,ComAtprotoAccountCreate:()=>jr,ComAtprotoAccountCreateInviteCode:()=>Ir,ComAtprotoAccountDelete:()=>Pr,ComAtprotoAccountGet:()=>Mr,ComAtprotoAccountRequestDelete:()=>Zr,ComAtprotoAccountRequestPasswordReset:()=>Lr,ComAtprotoAccountResetPassword:()=>Kr,ComAtprotoAdminBlob:()=>Ai,ComAtprotoAdminGetModerationAction:()=>zr,ComAtprotoAdminGetModerationActions:()=>Jr,ComAtprotoAdminGetModerationReport:()=>Yr,ComAtprotoAdminGetModerationReports:()=>eo,ComAtprotoAdminGetRecord:()=>ro,ComAtprotoAdminGetRepo:()=>no,ComAtprotoAdminModerationAction:()=>qi,ComAtprotoAdminModerationReport:()=>Fi,ComAtprotoAdminRecord:()=>Ji,ComAtprotoAdminRepo:()=>ia,ComAtprotoAdminResolveModerationReports:()=>ao,ComAtprotoAdminReverseModerationAction:()=>po,ComAtprotoAdminSearchRepos:()=>uo,ComAtprotoAdminTakeModerationAction:()=>mo,ComAtprotoBlobUpload:()=>ho,ComAtprotoHandleResolve:()=>vo,ComAtprotoHandleUpdate:()=>wo,ComAtprotoRepoBatchWrite:()=>ko,ComAtprotoRepoCreateRecord:()=>Io,ComAtprotoRepoDeleteRecord:()=>Po,ComAtprotoRepoDescribe:()=>Bo,ComAtprotoRepoGetRecord:()=>Mo,ComAtprotoRepoListRecords:()=>Zo,ComAtprotoRepoPutRecord:()=>Ko,ComAtprotoRepoRecordRef:()=>ha,ComAtprotoRepoRepoRef:()=>ba,ComAtprotoRepoStrongRef:()=>ka,ComAtprotoReportCreate:()=>Uo,ComAtprotoReportReasonType:()=>Ra,ComAtprotoReportSubject:()=>Ta,ComAtprotoServerGetAccountsConfig:()=>zo,ComAtprotoSessionCreate:()=>Yo,ComAtprotoSessionDelete:()=>tn,ComAtprotoSessionGet:()=>on,ComAtprotoSessionRefresh:()=>an,ComAtprotoSyncGetBlocks:()=>cn,ComAtprotoSyncGetCheckout:()=>un,ComAtprotoSyncGetCommitPath:()=>mn,ComAtprotoSyncGetHead:()=>fn,ComAtprotoSyncGetRecord:()=>gn,ComAtprotoSyncGetRepo:()=>bn,ComAtprotoSyncNotifyOfUpdate:()=>xn,ComAtprotoSyncRequestCrawl:()=>_n,ComAtprotoSyncSubscribeAllRepos:()=>Da,ComNS:()=>jp,ConfirmationRecord:()=>zp,DeclarationRecord:()=>Yp,EmbedNS:()=>Vp,FeedNS:()=>Lp,FollowRecord:()=>Hp,GraphNS:()=>Up,HandleNS:()=>Ep,NotificationNS:()=>Jp,PostRecord:()=>Gp,ProfileRecord:()=>Zp,RepoNS:()=>Ip,ReportNS:()=>qp,RepostRecord:()=>Kp,ServerNS:()=>Pp,SessionNS:()=>Dp,SyncNS:()=>Bp,SystemNS:()=>Xp,VoteRecord:()=>Fp,default:()=>ec}),e.exports=(e=>l(a({},"__esModule",{value:!0}),e))(y),(n=o||(o={})).assertEqual=e=>e,n.assertIs=function(e){},n.assertNever=function(e){throw new Error},n.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},n.getValidEnumValues=e=>{const t=n.objectKeys(e).filter((t=>"number"!=typeof e[e[t]])),r={};for(const o of t)r[o]=e[o];return n.objectValues(r)},n.objectValues=e=>n.objectKeys(e).map((function(t){return e[t]})),n.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},n.find=(e,t)=>{for(const r of e)if(t(r))return r},n.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,n.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},n.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t;var f=o.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),h=e=>{switch(typeof e){case"undefined":return f.undefined;case"string":return f.string;case"number":return isNaN(e)?f.nan:f.number;case"boolean":return f.boolean;case"function":return f.function;case"bigint":return f.bigint;case"object":return Array.isArray(e)?f.array:null===e?f.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?f.promise:"undefined"!=typeof Map&&e instanceof Map?f.map:"undefined"!=typeof Set&&e instanceof Set?f.set:"undefined"!=typeof Date&&e instanceof Date?f.date:f.object;default:return f.unknown}},g=o.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]),v=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},o=e=>{for(const n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(o);else if("invalid_return_type"===n.code)o(n.returnTypeError);else if("invalid_arguments"===n.code)o(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,o=0;for(;o<n.path.length;){const r=n.path[o];o===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],o++}}};return o(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,o.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},r=[];for(const o of this.issues)o.path.length>0?(t[o.path[0]]=t[o.path[0]]||[],t[o.path[0]].push(e(o))):r.push(e(o));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}};v.create=e=>new v(e);var b=(e,t)=>{let r;switch(e.code){case g.invalid_type:r=e.received===f.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case g.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,o.jsonStringifyReplacer)}`;break;case g.unrecognized_keys:r=`Unrecognized key(s) in object: ${o.joinValues(e.keys,", ")}`;break;case g.invalid_union:r="Invalid input";break;case g.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${o.joinValues(e.options)}`;break;case g.invalid_enum_value:r=`Invalid enum value. Expected ${o.joinValues(e.options)}, received '${e.received}'`;break;case g.invalid_arguments:r="Invalid function arguments";break;case g.invalid_return_type:r="Invalid function return type";break;case g.invalid_date:r="Invalid date";break;case g.invalid_string:"object"==typeof e.validation?"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:o.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case g.too_small:r="array"===e.type?`Array must contain ${e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be greater than ${e.inclusive?"or equal to ":""}${e.minimum}`:"date"===e.type?`Date must be greater than ${e.inclusive?"or equal to ":""}${new Date(e.minimum)}`:"Invalid input";break;case g.too_big:r="array"===e.type?`Array must contain ${e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be less than ${e.inclusive?"or equal to ":""}${e.maximum}`:"date"===e.type?`Date must be smaller than ${e.inclusive?"or equal to ":""}${new Date(e.maximum)}`:"Invalid input";break;case g.custom:r="Invalid input";break;case g.invalid_intersection_types:r="Intersection results could not be merged";break;case g.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;default:r=t.defaultError,o.assertNever(e)}return{message:r}},w=b;function x(){return w}var k=e=>{const{data:t,path:r,errorMaps:o,issueData:n}=e,i=[...r,...n.path||[]],a={...n,path:i};let s="";const p=o.filter((e=>!!e)).slice().reverse();for(const e of p)s=e(a,{data:t,defaultError:s}).message;return{...n,path:i,message:n.message||s}};function _(e,t){const r=k({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,x(),b].filter((e=>!!e))});e.common.issues.push(r)}var A,R,j=class{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const o of t){if("aborted"===o.status)return C;"dirty"===o.status&&e.dirty(),r.push(o.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t)r.push({key:await e.key,value:await e.value});return j.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const o of t){const{key:t,value:n}=o;if("aborted"===t.status)return C;if("aborted"===n.status)return C;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),(void 0!==n.value||o.alwaysSet)&&(r[t.value]=n.value)}return{status:e.value,value:r}}},C=Object.freeze({status:"aborted"}),T=e=>({status:"valid",value:e}),S=e=>"aborted"===e.status,$=e=>"dirty"===e.status,E=e=>"valid"===e.status,I=e=>void 0!==typeof Promise&&e instanceof Promise;(R=A||(A={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},R.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;var q=class{constructor(e,t,r,o){this.parent=e,this.data=t,this._path=r,this._key=o}get path(){return this._path.concat(this._key)}},P=(e,t)=>{if(E(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new v(e.common.issues)}};function D(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:o,description:n}=e;if(t&&(r||o))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=o?o:t.defaultError}:{message:null!=r?r:t.defaultError},description:n}}var B=class{constructor(e){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return h(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:h(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new j,ctx:{common:e.parent.common,data:e.data,parsedType:h(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(I(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const o={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:h(e)},n=this._parseSync({data:e,path:o.path,parent:o});return P(o,n)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:h(e)},o=this._parse({data:e,path:[],parent:r}),n=await(I(o)?o:Promise.resolve(o));return P(r,n)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,o)=>{const n=e(t),i=()=>o.addIssue({code:g.custom,...r(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then((e=>!!e||(i(),!1))):!!n||(i(),!1)}))}refinement(e,t){return this._refinement(((r,o)=>!!e(r)||(o.addIssue("function"==typeof t?t(r,o):t),!1)))}_refinement(e){return new ve({schema:this,typeName:_e.ZodEffects,effect:{type:"refinement",refinement:e}})}optional(){return be.create(this)}nullable(){return we.create(this)}nullish(){return this.optional().nullable()}array(){return Q.create(this)}promise(){return ge.create(this)}or(e){return oe.create([this,e])}and(e){return ae.create(this,e)}transform(e){return new ve({schema:this,typeName:_e.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new xe({innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:_e.ZodDefault})}brand(){return new je({typeName:_e.ZodBranded,type:this,...D(void 0)})}describe(e){return new(0,this.constructor)({...this._def,description:e})}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},N=/^c[^\s-]{8,}$/i,M=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,O=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,Z=class extends B{constructor(){super(...arguments),this._regex=(e,t,r)=>this.refinement((t=>e.test(t)),{validation:t,code:g.invalid_string,...A.errToObj(r)}),this.nonempty=e=>this.min(1,A.errToObj(e)),this.trim=()=>new Z({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){if(this._getType(e)!==f.string){const t=this._getOrReturnCtx(e);return _(t,{code:g.invalid_type,expected:f.string,received:t.parsedType}),C}const t=new j;let r;for(const n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(r=this._getOrReturnCtx(e,r),_(r,{code:g.too_small,minimum:n.value,type:"string",inclusive:!0,message:n.message}),t.dirty());else if("max"===n.kind)e.data.length>n.value&&(r=this._getOrReturnCtx(e,r),_(r,{code:g.too_big,maximum:n.value,type:"string",inclusive:!0,message:n.message}),t.dirty());else if("email"===n.kind)O.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"email",code:g.invalid_string,message:n.message}),t.dirty());else if("uuid"===n.kind)M.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"uuid",code:g.invalid_string,message:n.message}),t.dirty());else if("cuid"===n.kind)N.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"cuid",code:g.invalid_string,message:n.message}),t.dirty());else if("url"===n.kind)try{new URL(e.data)}catch(o){r=this._getOrReturnCtx(e,r),_(r,{validation:"url",code:g.invalid_string,message:n.message}),t.dirty()}else"regex"===n.kind?(n.regex.lastIndex=0,n.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),_(r,{validation:"regex",code:g.invalid_string,message:n.message}),t.dirty())):"trim"===n.kind?e.data=e.data.trim():"startsWith"===n.kind?e.data.startsWith(n.value)||(r=this._getOrReturnCtx(e,r),_(r,{code:g.invalid_string,validation:{startsWith:n.value},message:n.message}),t.dirty()):"endsWith"===n.kind?e.data.endsWith(n.value)||(r=this._getOrReturnCtx(e,r),_(r,{code:g.invalid_string,validation:{endsWith:n.value},message:n.message}),t.dirty()):o.assertNever(n);return{status:t.value,value:e.data}}_addCheck(e){return new Z({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...A.errToObj(e)})}url(e){return this._addCheck({kind:"url",...A.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...A.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...A.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...A.errToObj(t)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...A.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...A.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...A.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...A.errToObj(t)})}length(e,t){return this.min(e,t).max(e,t)}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};function V(e,t){const r=(e.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,n=r>o?r:o;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}Z.create=e=>new Z({checks:[],typeName:_e.ZodString,...D(e)});var L=class extends B{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._getType(e)!==f.number){const t=this._getOrReturnCtx(e);return _(t,{code:g.invalid_type,expected:f.number,received:t.parsedType}),C}let t;const r=new j;for(const n of this._def.checks)"int"===n.kind?o.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),_(t,{code:g.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),_(t,{code:g.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),_(t,{code:g.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==V(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),_(t,{code:g.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):o.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,A.toString(t))}gt(e,t){return this.setLimit("min",e,!1,A.toString(t))}lte(e,t){return this.setLimit("max",e,!0,A.toString(t))}lt(e,t){return this.setLimit("max",e,!1,A.toString(t))}setLimit(e,t,r,o){return new L({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:A.toString(o)}]})}_addCheck(e){return new L({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:A.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:A.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:A.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:A.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:A.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:A.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind))}};L.create=e=>new L({checks:[],typeName:_e.ZodNumber,...D(e)});var G=class extends B{_parse(e){if(this._getType(e)!==f.bigint){const t=this._getOrReturnCtx(e);return _(t,{code:g.invalid_type,expected:f.bigint,received:t.parsedType}),C}return T(e.data)}};G.create=e=>new G({typeName:_e.ZodBigInt,...D(e)});var K=class extends B{_parse(e){if(this._getType(e)!==f.boolean){const t=this._getOrReturnCtx(e);return _(t,{code:g.invalid_type,expected:f.boolean,received:t.parsedType}),C}return T(e.data)}};K.create=e=>new K({typeName:_e.ZodBoolean,...D(e)});var F=class extends B{_parse(e){if(this._getType(e)!==f.date){const t=this._getOrReturnCtx(e);return _(t,{code:g.invalid_type,expected:f.date,received:t.parsedType}),C}if(isNaN(e.data.getTime()))return _(this._getOrReturnCtx(e),{code:g.invalid_date}),C;const t=new j;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),_(r,{code:g.too_small,message:n.message,inclusive:!0,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),_(r,{code:g.too_big,message:n.message,inclusive:!0,maximum:n.value,type:"date"}),t.dirty()):o.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new F({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:A.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:A.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}};F.create=e=>new F({checks:[],typeName:_e.ZodDate,...D(e)});var U=class extends B{_parse(e){if(this._getType(e)!==f.undefined){const t=this._getOrReturnCtx(e);return _(t,{code:g.invalid_type,expected:f.undefined,received:t.parsedType}),C}return T(e.data)}};U.create=e=>new U({typeName:_e.ZodUndefined,...D(e)});var W=class extends B{_parse(e){if(this._getType(e)!==f.null){const t=this._getOrReturnCtx(e);return _(t,{code:g.invalid_type,expected:f.null,received:t.parsedType}),C}return T(e.data)}};W.create=e=>new W({typeName:_e.ZodNull,...D(e)});var z=class extends B{constructor(){super(...arguments),this._any=!0}_parse(e){return T(e.data)}};z.create=e=>new z({typeName:_e.ZodAny,...D(e)});var H=class extends B{constructor(){super(...arguments),this._unknown=!0}_parse(e){return T(e.data)}};H.create=e=>new H({typeName:_e.ZodUnknown,...D(e)});var J=class extends B{_parse(e){const t=this._getOrReturnCtx(e);return _(t,{code:g.invalid_type,expected:f.never,received:t.parsedType}),C}};J.create=e=>new J({typeName:_e.ZodNever,...D(e)});var X=class extends B{_parse(e){if(this._getType(e)!==f.undefined){const t=this._getOrReturnCtx(e);return _(t,{code:g.invalid_type,expected:f.void,received:t.parsedType}),C}return T(e.data)}};X.create=e=>new X({typeName:_e.ZodVoid,...D(e)});var Y,Q=class extends B{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),o=this._def;if(t.parsedType!==f.array)return _(t,{code:g.invalid_type,expected:f.array,received:t.parsedType}),C;if(null!==o.minLength&&t.data.length<o.minLength.value&&(_(t,{code:g.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,message:o.minLength.message}),r.dirty()),null!==o.maxLength&&t.data.length>o.maxLength.value&&(_(t,{code:g.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,message:o.maxLength.message}),r.dirty()),t.common.async)return Promise.all(t.data.map(((e,r)=>o.type._parseAsync(new q(t,e,t.path,r))))).then((e=>j.mergeArray(r,e)));const n=t.data.map(((e,r)=>o.type._parseSync(new q(t,e,t.path,r))));return j.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new Q({...this._def,minLength:{value:e,message:A.toString(t)}})}max(e,t){return new Q({...this._def,maxLength:{value:e,message:A.toString(t)}})}length(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};Q.create=(e,t)=>new Q({type:e,minLength:null,maxLength:null,typeName:_e.ZodArray,...D(t)}),(Y||(Y={})).mergeShapes=(e,t)=>({...e,...t});var ee=e=>t=>new re({...e,shape:()=>({...e.shape(),...t})});function te(e){if(e instanceof re){const t={};for(const r in e.shape){const o=e.shape[r];t[r]=be.create(te(o))}return new re({...e._def,shape:()=>t})}return e instanceof Q?Q.create(te(e.element)):e instanceof be?be.create(te(e.unwrap())):e instanceof we?we.create(te(e.unwrap())):e instanceof se?se.create(e.items.map((e=>te(e)))):e}var re=class extends B{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=ee(this._def),this.extend=ee(this._def)}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=o.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==f.object){const t=this._getOrReturnCtx(e);return _(t,{code:g.invalid_type,expected:f.object,received:t.parsedType}),C}const{status:t,ctx:r}=this._processInputParams(e),{shape:o,keys:n}=this._getCached(),i=[];if(!(this._def.catchall instanceof J&&"strip"===this._def.unknownKeys))for(const e in r.data)n.includes(e)||i.push(e);const a=[];for(const e of n){const t=o[e],n=r.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new q(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof J){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of i)a.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)i.length>0&&(_(r,{code:g.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const o=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new q(r,o,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>j.mergeObjectSync(t,e))):j.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return A.errToObj,new re({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var o,n,i,a;const s=null!==(i=null===(n=(o=this._def).errorMap)||void 0===n?void 0:n.call(o,t,r).message)&&void 0!==i?i:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=A.errToObj(e).message)&&void 0!==a?a:s}:{message:s}}}:{}})}strip(){return new re({...this._def,unknownKeys:"strip"})}passthrough(){return new re({...this._def,unknownKeys:"passthrough"})}setKey(e,t){return this.augment({[e]:t})}merge(e){return new re({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>Y.mergeShapes(this._def.shape(),e._def.shape()),typeName:_e.ZodObject})}catchall(e){return new re({...this._def,catchall:e})}pick(e){const t={};return o.objectKeys(e).map((e=>{this.shape[e]&&(t[e]=this.shape[e])})),new re({...this._def,shape:()=>t})}omit(e){const t={};return o.objectKeys(this.shape).map((r=>{-1===o.objectKeys(e).indexOf(r)&&(t[r]=this.shape[r])})),new re({...this._def,shape:()=>t})}deepPartial(){return te(this)}partial(e){const t={};if(e)return o.objectKeys(this.shape).map((r=>{-1===o.objectKeys(e).indexOf(r)?t[r]=this.shape[r]:t[r]=this.shape[r].optional()})),new re({...this._def,shape:()=>t});for(const e in this.shape){const r=this.shape[e];t[e]=r.optional()}return new re({...this._def,shape:()=>t})}required(){const e={};for(const t in this.shape){let r=this.shape[t];for(;r instanceof be;)r=r._def.innerType;e[t]=r}return new re({...this._def,shape:()=>e})}keyof(){return ye(o.objectKeys(this.shape))}};re.create=(e,t)=>new re({shape:()=>e,unknownKeys:"strip",catchall:J.create(),typeName:_e.ZodObject,...D(t)}),re.strictCreate=(e,t)=>new re({shape:()=>e,unknownKeys:"strict",catchall:J.create(),typeName:_e.ZodObject,...D(t)}),re.lazycreate=(e,t)=>new re({shape:e,unknownKeys:"strip",catchall:J.create(),typeName:_e.ZodObject,...D(t)});var oe=class extends B{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new v(e.ctx.common.issues)));return _(t,{code:g.invalid_union,unionErrors:r}),C}));{let e;const o=[];for(const n of r){const r={...t,common:{...t.common,issues:[]},parent:null},i=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&o.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const n=o.map((e=>new v(e)));return _(t,{code:g.invalid_union,unionErrors:n}),C}}get options(){return this._def.options}};oe.create=(e,t)=>new oe({options:e,typeName:_e.ZodUnion,...D(t)});var ne=class extends B{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.object)return _(t,{code:g.invalid_type,expected:f.object,received:t.parsedType}),C;const r=this.discriminator,o=t.data[r],n=this.options.get(o);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(_(t,{code:g.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[r]}),C)}get discriminator(){return this._def.discriminator}get validDiscriminatorValues(){return Array.from(this.options.keys())}get options(){return this._def.options}static create(e,t,r){const o=new Map;try{t.forEach((t=>{const r=t.shape[e].value;o.set(r,t)}))}catch(e){throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(o.size!==t.length)throw new Error("Some of the discriminator values are not unique");return new ne({typeName:_e.ZodDiscriminatedUnion,discriminator:e,options:o,...D(r)})}};function ie(e,t){const r=h(e),n=h(t);if(e===t)return{valid:!0,data:e};if(r===f.object&&n===f.object){const r=o.objectKeys(t),n=o.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const r of n){const o=ie(e[r],t[r]);if(!o.valid)return{valid:!1};i[r]=o.data}return{valid:!0,data:i}}if(r===f.array&&n===f.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let o=0;o<e.length;o++){const n=ie(e[o],t[o]);if(!n.valid)return{valid:!1};r.push(n.data)}return{valid:!0,data:r}}return r===f.date&&n===f.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var ae=class extends B{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),o=(e,o)=>{if(S(e)||S(o))return C;const n=ie(e.value,o.value);return n.valid?(($(e)||$(o))&&t.dirty(),{status:t.value,value:n.data}):(_(r,{code:g.invalid_intersection_types}),C)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>o(e,t))):o(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};ae.create=(e,t,r)=>new ae({left:e,right:t,typeName:_e.ZodIntersection,...D(r)});var se=class extends B{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.array)return _(r,{code:g.invalid_type,expected:f.array,received:r.parsedType}),C;if(r.data.length<this._def.items.length)return _(r,{code:g.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),C;!this._def.rest&&r.data.length>this._def.items.length&&(_(r,{code:g.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),t.dirty());const o=r.data.map(((e,t)=>{const o=this._def.items[t]||this._def.rest;return o?o._parse(new q(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(o).then((e=>j.mergeArray(t,e))):j.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new se({...this._def,rest:e})}};se.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new se({items:e,typeName:_e.ZodTuple,rest:null,...D(t)})};var pe=class extends B{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.object)return _(r,{code:g.invalid_type,expected:f.object,received:r.parsedType}),C;const o=[],n=this._def.keyType,i=this._def.valueType;for(const e in r.data)o.push({key:n._parse(new q(r,e,r.path,e)),value:i._parse(new q(r,r.data[e],r.path,e))});return r.common.async?j.mergeObjectAsync(t,o):j.mergeObjectSync(t,o)}get element(){return this._def.valueType}static create(e,t,r){return new pe(t instanceof B?{keyType:e,valueType:t,typeName:_e.ZodRecord,...D(r)}:{keyType:Z.create(),valueType:e,typeName:_e.ZodRecord,...D(t)})}},ce=class extends B{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.map)return _(r,{code:g.invalid_type,expected:f.map,received:r.parsedType}),C;const o=this._def.keyType,n=this._def.valueType,i=[...r.data.entries()].map((([e,t],i)=>({key:o._parse(new q(r,e,r.path,[i,"key"])),value:n._parse(new q(r,t,r.path,[i,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of i){const o=await r.key,n=await r.value;if("aborted"===o.status||"aborted"===n.status)return C;"dirty"!==o.status&&"dirty"!==n.status||t.dirty(),e.set(o.value,n.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of i){const o=r.key,n=r.value;if("aborted"===o.status||"aborted"===n.status)return C;"dirty"!==o.status&&"dirty"!==n.status||t.dirty(),e.set(o.value,n.value)}return{status:t.value,value:e}}}};ce.create=(e,t,r)=>new ce({valueType:t,keyType:e,typeName:_e.ZodMap,...D(r)});var de=class extends B{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.set)return _(r,{code:g.invalid_type,expected:f.set,received:r.parsedType}),C;const o=this._def;null!==o.minSize&&r.data.size<o.minSize.value&&(_(r,{code:g.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,message:o.minSize.message}),t.dirty()),null!==o.maxSize&&r.data.size>o.maxSize.value&&(_(r,{code:g.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,message:o.maxSize.message}),t.dirty());const n=this._def.valueType;function i(e){const r=new Set;for(const o of e){if("aborted"===o.status)return C;"dirty"===o.status&&t.dirty(),r.add(o.value)}return{status:t.value,value:r}}const a=[...r.data.values()].map(((e,t)=>n._parse(new q(r,e,r.path,t))));return r.common.async?Promise.all(a).then((e=>i(e))):i(a)}min(e,t){return new de({...this._def,minSize:{value:e,message:A.toString(t)}})}max(e,t){return new de({...this._def,maxSize:{value:e,message:A.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};de.create=(e,t)=>new de({valueType:e,minSize:null,maxSize:null,typeName:_e.ZodSet,...D(t)});var ue=class extends B{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.function)return _(t,{code:g.invalid_type,expected:f.function,received:t.parsedType}),C;function r(e,r){return k({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,x(),b].filter((e=>!!e)),issueData:{code:g.invalid_arguments,argumentsError:r}})}function o(e,r){return k({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,x(),b].filter((e=>!!e)),issueData:{code:g.invalid_return_type,returnTypeError:r}})}const n={errorMap:t.common.contextualErrorMap},i=t.data;return this._def.returns instanceof ge?T((async(...e)=>{const t=new v([]),a=await this._def.args.parseAsync(e,n).catch((o=>{throw t.addIssue(r(e,o)),t})),s=await i(...a);return await this._def.returns._def.type.parseAsync(s,n).catch((e=>{throw t.addIssue(o(s,e)),t}))})):T(((...e)=>{const t=this._def.args.safeParse(e,n);if(!t.success)throw new v([r(e,t.error)]);const a=i(...t.data),s=this._def.returns.safeParse(a,n);if(!s.success)throw new v([o(a,s.error)]);return s.data}))}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ue({...this._def,args:se.create(e).rest(H.create())})}returns(e){return new ue({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ue({args:e||se.create([]).rest(H.create()),returns:t||H.create(),typeName:_e.ZodFunction,...D(r)})}},le=class extends B{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};le.create=(e,t)=>new le({getter:e,typeName:_e.ZodLazy,...D(t)});var me=class extends B{_parse(e){return e.data!==this._def.value?(_(this._getOrReturnCtx(e),{code:g.invalid_literal,expected:this._def.value}),C):{status:"valid",value:e.data}}get value(){return this._def.value}};function ye(e,t){return new fe({values:e,typeName:_e.ZodEnum,...D(t)})}me.create=(e,t)=>new me({value:e,typeName:_e.ZodLiteral,...D(t)});var fe=class extends B{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return _(t,{expected:o.joinValues(r),received:t.parsedType,code:g.invalid_type}),C}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return _(t,{received:t.data,code:g.invalid_enum_value,options:r}),C}return T(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}};fe.create=ye;var he=class extends B{_parse(e){const t=o.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==f.string&&r.parsedType!==f.number){const e=o.objectValues(t);return _(r,{expected:o.joinValues(e),received:r.parsedType,code:g.invalid_type}),C}if(-1===t.indexOf(e.data)){const e=o.objectValues(t);return _(r,{received:r.data,code:g.invalid_enum_value,options:e}),C}return T(e.data)}get enum(){return this._def.values}};he.create=(e,t)=>new he({values:e,typeName:_e.ZodNativeEnum,...D(t)});var ge=class extends B{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.promise&&!1===t.common.async)return _(t,{code:g.invalid_type,expected:f.promise,received:t.parsedType}),C;const r=t.parsedType===f.promise?t.data:Promise.resolve(t.data);return T(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}};ge.create=(e,t)=>new ge({type:e,typeName:_e.ZodPromise,...D(t)});var ve=class extends B{innerType(){return this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null;if("preprocess"===n.type){const e=n.transform(r.data);return r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}const i={addIssue:e=>{_(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===o.status?C:("dirty"===o.status&&t.dirty(),e(o.value),{status:t.value,value:o.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?C:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!E(e))return e;const o=n.transform(e.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>E(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}o.assertNever(n)}};ve.create=(e,t,r)=>new ve({schema:e,typeName:_e.ZodEffects,effect:t,...D(r)}),ve.createWithPreprocess=(e,t,r)=>new ve({schema:t,effect:{type:"preprocess",transform:e},typeName:_e.ZodEffects,...D(r)});var be=class extends B{_parse(e){return this._getType(e)===f.undefined?T(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};be.create=(e,t)=>new be({innerType:e,typeName:_e.ZodOptional,...D(t)});var we=class extends B{_parse(e){return this._getType(e)===f.null?T(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};we.create=(e,t)=>new we({innerType:e,typeName:_e.ZodNullable,...D(t)});var xe=class extends B{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===f.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};xe.create=(e,t)=>new be({innerType:e,typeName:_e.ZodOptional,...D(t)});var ke=class extends B{_parse(e){if(this._getType(e)!==f.nan){const t=this._getOrReturnCtx(e);return _(t,{code:g.invalid_type,expected:f.nan,received:t.parsedType}),C}return{status:"valid",value:e.data}}};ke.create=e=>new ke({typeName:_e.ZodNaN,...D(e)});var _e,Ae,Re=Symbol("zod_brand"),je=class extends B{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}},Ce=(e,t={},r)=>e?z.create().superRefine(((o,n)=>{if(!e(o)){const e="function"==typeof t?t(o):t,i="string"==typeof e?{message:e}:e;n.addIssue({code:"custom",...i,fatal:r})}})):z.create(),Te={object:re.lazycreate};(Ae=_e||(_e={})).ZodString="ZodString",Ae.ZodNumber="ZodNumber",Ae.ZodNaN="ZodNaN",Ae.ZodBigInt="ZodBigInt",Ae.ZodBoolean="ZodBoolean",Ae.ZodDate="ZodDate",Ae.ZodUndefined="ZodUndefined",Ae.ZodNull="ZodNull",Ae.ZodAny="ZodAny",Ae.ZodUnknown="ZodUnknown",Ae.ZodNever="ZodNever",Ae.ZodVoid="ZodVoid",Ae.ZodArray="ZodArray",Ae.ZodObject="ZodObject",Ae.ZodUnion="ZodUnion",Ae.ZodDiscriminatedUnion="ZodDiscriminatedUnion",Ae.ZodIntersection="ZodIntersection",Ae.ZodTuple="ZodTuple",Ae.ZodRecord="ZodRecord",Ae.ZodMap="ZodMap",Ae.ZodSet="ZodSet",Ae.ZodFunction="ZodFunction",Ae.ZodLazy="ZodLazy",Ae.ZodLiteral="ZodLiteral",Ae.ZodEnum="ZodEnum",Ae.ZodEffects="ZodEffects",Ae.ZodNativeEnum="ZodNativeEnum",Ae.ZodOptional="ZodOptional",Ae.ZodNullable="ZodNullable",Ae.ZodDefault="ZodDefault",Ae.ZodPromise="ZodPromise",Ae.ZodBranded="ZodBranded";var Se=Z.create,$e=L.create,Ee=ke.create,Ie=G.create,qe=K.create,Pe=F.create,De=U.create,Be=W.create,Ne=z.create,Me=H.create,Oe=J.create,Ze=X.create,Ve=Q.create,Le=re.create,Ge=re.strictCreate,Ke=oe.create,Fe=ne.create,Ue=ae.create,We=se.create,ze=pe.create,He=ce.create,Je=de.create,Xe=ue.create,Ye=le.create,Qe=me.create,et=fe.create,tt=he.create,rt=ge.create,ot=ve.create,nt=be.create,it=we.create,at=ve.createWithPreprocess,st=C,pt=Object.freeze({__proto__:null,getParsedType:h,ZodParsedType:f,defaultErrorMap:b,setErrorMap:function(e){w=e},getErrorMap:x,makeIssue:k,EMPTY_PATH:[],addIssueToContext:_,ParseStatus:j,INVALID:C,DIRTY:e=>({status:"dirty",value:e}),OK:T,isAborted:S,isDirty:$,isValid:E,isAsync:I,ZodType:B,ZodString:Z,ZodNumber:L,ZodBigInt:G,ZodBoolean:K,ZodDate:F,ZodUndefined:U,ZodNull:W,ZodAny:z,ZodUnknown:H,ZodNever:J,ZodVoid:X,ZodArray:Q,get objectUtil(){return Y},ZodObject:re,ZodUnion:oe,ZodDiscriminatedUnion:ne,ZodIntersection:ae,ZodTuple:se,ZodRecord:pe,ZodMap:ce,ZodSet:de,ZodFunction:ue,ZodLazy:le,ZodLiteral:me,ZodEnum:fe,ZodNativeEnum:he,ZodPromise:ge,ZodEffects:ve,ZodTransformer:ve,ZodOptional:be,ZodNullable:we,ZodDefault:xe,ZodNaN:ke,BRAND:Re,ZodBranded:je,custom:Ce,Schema:B,ZodSchema:B,late:Te,get ZodFirstPartyTypeKind(){return _e},any:Ne,array:Ve,bigint:Ie,boolean:qe,date:Pe,discriminatedUnion:Fe,effect:ot,enum:et,function:Xe,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Ce((t=>t instanceof e),t,!0),intersection:Ue,lazy:Ye,literal:Qe,map:He,nan:Ee,nativeEnum:tt,never:Oe,null:Be,nullable:it,number:$e,object:Le,oboolean:()=>qe().optional(),onumber:()=>$e().optional(),optional:nt,ostring:()=>Se().optional(),preprocess:at,promise:rt,record:ze,set:Je,strictObject:Ge,string:Se,transformer:ot,tuple:We,undefined:De,union:Ke,unknown:Me,void:Ze,NEVER:st,ZodIssueCode:g,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:v}),ct=pt.object({error:pt.string().optional(),message:pt.string().optional()}),dt=(e=>(e[e.Unknown=1]="Unknown",e[e.InvalidResponse=2]="InvalidResponse",e[e.Success=200]="Success",e[e.InvalidRequest=400]="InvalidRequest",e[e.AuthRequired=401]="AuthRequired",e[e.Forbidden=403]="Forbidden",e[e.XRPCNotSupported=404]="XRPCNotSupported",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.RateLimitExceeded=429]="RateLimitExceeded",e[e.InternalServerError=500]="InternalServerError",e[e.MethodNotImplemented=501]="MethodNotImplemented",e[e.UpstreamFailure=502]="UpstreamFailure",e[e.NotEnoughResouces=503]="NotEnoughResouces",e[e.UpstreamTimeout=504]="UpstreamTimeout",e))(dt||{}),ut={2:"InvalidResponse",200:"Success",400:"InvalidRequest",401:"AuthenticationRequired",403:"Forbidden",404:"XRPCNotSupported",413:"PayloadTooLarge",429:"RateLimitExceeded",500:"InternalServerError",501:"MethodNotImplemented",502:"UpstreamFailure",503:"NotEnoughResouces",504:"UpstreamTimeout"},lt={2:"Invalid Response",200:"Success",400:"Invalid Request",401:"Authentication Required",403:"Forbidden",404:"XRPC Not Supported",413:"Payload Too Large",429:"Rate Limit Exceeded",500:"Internal Server Error",501:"Method Not Implemented",502:"Upstream Failure",503:"Not Enough Resouces",504:"Upstream Timeout"},mt=class extends Error{constructor(e,t,r){super(r||t||lt[e]),this.status=e,this.error=t,this.success=!1,this.error||(this.error=ut[e])}},yt=class extends mt{constructor(e,t,r){super(2,lt[2],"The server gave an invalid response and may be out of date."),this.lexiconNsid=e,this.validationError=t,this.responseBody=r}},ft=/^[a-zA-Z]([a-zA-Z0-9-])*$/,ht=class{constructor(e){this.segments=[];const t=e.split(".");if(t.length<=2)throw new Error(`Invalid NSID: ${e}`);for(let e=0;e<t.length;e++){const r=t[e];if(!ft.test(r)&&(e!==t.length-1||"*"!==r))throw new Error(`Invalid NSID: invalid character in segment "${r}"`)}this.segments=t}static parse(e){return new ht(e)}static create(e,t){const r=[...e.split(".").reverse(),t].join(".");return new ht(r)}static isValid(e){try{return ht.parse(e),!0}catch(e){return!1}}get authority(){return this.segments.slice(0,this.segments.length-1).reverse().join(".")}get name(){return this.segments.at(this.segments.length-1)}toString(){return this.segments.join(".")}},gt=pt.object({type:pt.literal("boolean"),description:pt.string().optional(),default:pt.boolean().optional(),const:pt.boolean().optional()}),vt=pt.object({type:pt.literal("number"),description:pt.string().optional(),default:pt.number().optional(),minimum:pt.number().optional(),maximum:pt.number().optional(),enum:pt.number().array().optional(),const:pt.number().optional()}),bt=pt.object({type:pt.literal("integer"),description:pt.string().optional(),default:pt.number().int().optional(),minimum:pt.number().int().optional(),maximum:pt.number().int().optional(),enum:pt.number().int().array().optional(),const:pt.number().int().optional()}),wt=pt.object({type:pt.literal("string"),description:pt.string().optional(),default:pt.string().optional(),minLength:pt.number().int().optional(),maxLength:pt.number().int().optional(),enum:pt.string().array().optional(),const:pt.string().optional(),knownValues:pt.string().array().optional()}),xt=pt.object({type:pt.literal("datetime"),description:pt.string().optional()}),kt=pt.object({type:pt.literal("unknown"),description:pt.string().optional()}),_t=pt.union([gt,vt,bt,wt,xt,kt]),At=pt.object({type:pt.literal("ref"),description:pt.string().optional(),ref:pt.string()}),Rt=pt.object({type:pt.literal("union"),description:pt.string().optional(),refs:pt.string().array(),closed:pt.boolean().optional()}),jt=pt.union([At,Rt]),Ct=pt.object({type:pt.literal("blob"),description:pt.string().optional(),accept:pt.string().array().optional(),maxSize:pt.number().optional()}),Tt=pt.object({type:pt.literal("image"),description:pt.string().optional(),accept:pt.string().array().optional(),maxSize:pt.number().optional(),maxWidth:pt.number().int().optional(),maxHeight:pt.number().int().optional()}),St=pt.object({type:pt.literal("video"),description:pt.string().optional(),accept:pt.string().array().optional(),maxSize:pt.number().optional(),maxWidth:pt.number().int().optional(),maxHeight:pt.number().int().optional(),maxLength:pt.number().int().optional()}),$t=pt.object({type:pt.literal("audio"),description:pt.string().optional(),accept:pt.string().array().optional(),maxSize:pt.number().optional(),maxLength:pt.number().int().optional()}),Et=pt.union([Ct,Tt,St,$t]),It=pt.object({type:pt.literal("array"),description:pt.string().optional(),items:pt.union([_t,Et,jt]),minLength:pt.number().int().optional(),maxLength:pt.number().int().optional()}),qt=It.merge(pt.object({items:_t})),Pt=pt.object({type:pt.literal("token"),description:pt.string().optional()}),Dt=pt.object({type:pt.literal("object"),description:pt.string().optional(),required:pt.string().array().optional(),nullable:pt.string().array().optional(),properties:pt.record(pt.union([jt,It,Et,_t])).optional()}),Bt=pt.object({type:pt.literal("params"),description:pt.string().optional(),required:pt.string().array().optional(),properties:pt.record(pt.union([_t,qt]))}),Nt=pt.object({description:pt.string().optional(),encoding:pt.string(),schema:pt.union([jt,Dt]).optional()}),Mt=pt.object({description:pt.string().optional(),schema:pt.union([jt,Dt]).optional(),codes:pt.record(pt.number().int()).optional()}),Ot=pt.object({name:pt.string(),description:pt.string().optional()}),Zt=pt.object({type:pt.literal("query"),description:pt.string().optional(),parameters:Bt.optional(),output:Nt.optional(),errors:Ot.array().optional()}),Vt=pt.object({type:pt.literal("procedure"),description:pt.string().optional(),parameters:Bt.optional(),input:Nt.optional(),output:Nt.optional(),errors:Ot.array().optional()}),Lt=pt.object({type:pt.literal("subscription"),description:pt.string().optional(),parameters:Bt.optional(),message:Mt.optional(),infos:Ot.array().optional(),errors:Ot.array().optional()}),Gt=pt.object({type:pt.literal("record"),description:pt.string().optional(),key:pt.string().optional(),record:Dt}),Kt=pt.union([Gt,Zt,Vt,Lt,Ct,Tt,St,$t,It,Pt,Dt,gt,vt,bt,wt,xt,kt]),Ft=pt.object({lexicon:pt.literal(1),id:pt.string().refine((e=>ht.isValid(e)),{message:"Must be a valid NSID"}),revision:pt.number().optional(),description:pt.string().optional(),defs:pt.record(Kt)}).superRefine(((e,t)=>{for(const r in e.defs){const o=e.defs[r];"main"===r||"record"!==o.type&&"procedure"!==o.type&&"query"!==o.type&&"subscription"!==o.type||t.addIssue({code:pt.ZodIssueCode.custom,message:"Records, procedures, queries, and subscriptions must be the main definition."})}}));function Ut(e){return null!==e&&"object"==typeof e}function Wt(e,t){return t in e}var zt=pt.object({$type:pt.string()}),Ht=class extends Error{constructor(e,t,r){super(e),this.schemaDef=t,this.issues=r,this.schemaDef=t,this.issues=r}},Jt=class extends Error{},Xt=class extends Error{},Yt=class extends Error{},Qt=((e,t,r)=>(r=null!=e?i(c(e)):{},l(e&&e.__esModule?r:a(r,"default",{value:e,enumerable:!0}),e)))(m());function er(e,t,r,o){switch(r.type){case"boolean":return tr(0,t,r,o);case"number":return rr(0,t,r,o);case"integer":return or(0,t,r,o);case"string":return nr(0,t,r,o);case"datetime":return ir(0,t,0,o);case"unknown":return ar(0,t,0,o);default:return{success:!1,error:new Jt(`Unexpected lexicon type: ${r.type}`)}}}function tr(e,t,r,o){const n=typeof o;return"undefined"===n?"boolean"==typeof r.default?{success:!0,value:r.default}:{success:!1,error:new Jt(`${t} must be a boolean`)}:"boolean"!==n?{success:!1,error:new Jt(`${t} must be a boolean`)}:"boolean"==typeof r.const&&o!==r.const?{success:!1,error:new Jt(`${t} must be ${r.const}`)}:{success:!0,value:o}}function rr(e,t,r,o){const n=typeof o;return"undefined"===n?"number"==typeof r.default?{success:!0,value:r.default}:{success:!1,error:new Jt(`${t} must be a number`)}:"number"!==n?{success:!1,error:new Jt(`${t} must be a number`)}:"number"==typeof r.const&&o!==r.const?{success:!1,error:new Jt(`${t} must be ${r.const}`)}:Array.isArray(r.enum)&&!r.enum.includes(o)?{success:!1,error:new Jt(`${t} must be one of (${r.enum.join("|")})`)}:"number"==typeof r.maximum&&o>r.maximum?{success:!1,error:new Jt(`${t} can not be greater than ${r.maximum}`)}:"number"==typeof r.minimum&&o<r.minimum?{success:!1,error:new Jt(`${t} can not be less than ${r.minimum}`)}:{success:!0,value:o}}function or(e,t,r,o){const n=rr(0,t,r,o);return n.success?(o=n.value,Number.isInteger(o)?{success:!0,value:o}:{success:!1,error:new Jt(`${t} must be an integer`)}):n}function nr(e,t,r,o){const n=typeof o;return"undefined"===n?"string"==typeof r.default?{success:!0,value:r.default}:{success:!1,error:new Jt(`${t} must be a string`)}:"string"!==n?{success:!1,error:new Jt(`${t} must be a string`)}:"string"==typeof r.const&&o!==r.const?{success:!1,error:new Jt(`${t} must be ${r.const}`)}:Array.isArray(r.enum)&&!r.enum.includes(o)?{success:!1,error:new Jt(`${t} must be one of (${r.enum.join("|")})`)}:"number"==typeof r.maxLength&&o.length>r.maxLength?{success:!1,error:new Jt(`${t} must not be longer than ${r.maxLength} characters`)}:"number"==typeof r.minLength&&o.length<r.minLength?{success:!1,error:new Jt(`${t} must not be shorter than ${r.minLength} characters`)}:{success:!0,value:o}}function ir(e,t,r,o){if("string"!=typeof o)return{success:!1,error:new Jt(`${t} must be a string`)};try{if("string"!=typeof o||!(0,Qt.isValidISODateString)(o))throw new Jt(`${t} must be an iso8601 formatted datetime`)}catch{throw new Jt(`${t} must be an iso8601 formatted datetime`)}return{success:!0,value:o}}function ar(e,t,r,o){return o&&"object"==typeof o?{success:!0,value:o}:{success:!1,error:new Jt(`${t} must be an object`)}}function sr(e,t,r,o){return Ut(o)?Wt(o,"cid")&&"string"==typeof o.cid?Wt(o,"mimeType")&&"string"==typeof o.mimeType?{success:!0,value:o}:{success:!1,error:new Jt(`${t}/mimeType should be a string`)}:{success:!1,error:new Jt(`${t}/cid should be a string`)}:{success:!1,error:new Jt(`${t} should be an object`)}}function pr(e,t,r,o){switch(r.type){case"boolean":return tr(0,t,r,o);case"number":return rr(0,t,r,o);case"integer":return or(0,t,r,o);case"string":return nr(0,t,r,o);case"datetime":return ir(0,t,0,o);case"unknown":return ar(0,t,0,o);case"object":return dr(e,t,r,o);case"array":return cr(e,t,r,o);case"blob":return sr(0,t,0,o);case"image":case"video":case"audio":return function(e,t,r,o){return sr(0,t,0,o)}(0,t,0,o);default:return{success:!1,error:new Jt(`Unexpected lexicon type: ${r.type}`)}}}function cr(e,t,r,o){if(!Array.isArray(o))return{success:!1,error:new Jt(`${t} must be an array`)};if("number"==typeof r.maxLength&&o.length>r.maxLength)return{success:!1,error:new Jt(`${t} must not have more than ${r.maxLength} elements`)};if("number"==typeof r.minLength&&o.length<r.minLength)return{success:!1,error:new Jt(`${t} must not have fewer than ${r.minLength} elements`)};const n=r.items;for(let r=0;r<o.length;r++){const i=lr(e,`${t}/${r}`,n,o[r]);if(!i.success)return i}return{success:!0,value:o}}function dr(e,t,r,o){if(!o||"object"!=typeof o)return{success:!1,error:new Jt(`${t} must be an object`)};const n=new Set(r.required),i=new Set(r.nullable);let a=o;if("object"==typeof r.properties)for(const s in r.properties){if(null===o[s]&&i.has(s))continue;const p=lr(e,`${t}/${s}`,r.properties[s],o[s]),c=p.success?p.value:o[s],d=void 0===c;if(d&&n.has(s))return{success:!1,error:new Jt(`${t} must have the property "${s}"`)};if(!d&&!p.success)return p;c!==o[s]&&(a===o&&(a={...o}),a[s]=c)}return{success:!0,value:a}}function ur(e,t){if(e.startsWith("lex:"))return e;if(e.startsWith("#")){if(!t)throw new Error(`Unable to resolve uri without anchor: ${e}`);return`${t}${e}`}return`lex:${e}`}function lr(e,t,r,o,n=!1){let i,a;if("union"===r.type){if(!function(e){return zt.safeParse(e).success}(o))return{success:!1,error:new Jt(`${t} must be an object which includes the "$type" property`)};if(!r.refs.includes(ur(o.$type)))return r.closed?{success:!1,error:new Jt(`${t} $type must be one of ${r.refs.join(", ")}`)}:{success:!0,value:o};a=yr(e,{type:"ref",ref:o.$type})}else a=yr(e,r);for(const r of a){const a=n?dr(e,t,r,o):pr(e,t,r,o);if(a.success)return a;i??(i=a.error)}return a.length>1?{success:!1,error:new Jt(`${t} did not match any of the expected definitions`)}:{success:!1,error:i}}function mr(e,t,r,o,n=!1){const i=lr(e,t,r,o,n);if(!i.success)throw i.error;return i.value}function yr(e,t){return"ref"===t.type?[e.getDefOrThrow(t.ref)]:"union"===t.type?t.refs.map((t=>e.getDefOrThrow(t))).flat():[t]}var fr=class{constructor(e){if(this.docs=new Map,this.defs=new Map,e?.length)for(const t of e)this.add(t)}add(e){try{Ft.parse(e)}catch(t){throw t instanceof v?new Ht(`Failed to parse schema definition ${e.id}`,e,t.issues):t}const t=e,r=ur(t.id);if(this.docs.has(r))throw new Error(`${r} has already been registered`);gr(t,r,!0),this.docs.set(r,t);for(const[e,r]of hr(t))this.defs.set(e,r)}remove(e){e=ur(e);const t=this.docs.get(e);if(!t)throw new Error(`Unable to remove "${e}": does not exist`);for(const[e,r]of hr(t))this.defs.delete(e);this.docs.delete(e)}get(e){return e=ur(e),this.docs.get(e)}getDef(e){return e=ur(e),this.defs.get(e)}getDefOrThrow(e,t){const r=this.getDef(e);if(!r)throw new Yt(`Lexicon not found: ${e}`);if(t&&!t.includes(r.type))throw new Xt(`Not a ${t.join(" or ")} lexicon: ${e}`);return r}validate(e,t){e=ur(e);const r=this.getDefOrThrow(e,["record","object"]);if(!Ut(t))throw new Jt("Value must be an object");if("record"===r.type)return dr(this,"Record",r.record,t);if("object"===r.type)return dr(this,"Object",r,t);throw new Xt("Definition must be a record or object")}assertValidRecord(e,t){e=ur(e);const r=this.getDefOrThrow(e,["record"]);if(!Ut(t))throw new Jt("Record must be an object");if(!Wt(t,"$type")||"string"!=typeof t.$type)throw new Jt("Record/$type must be a string");const o=t.$type||"";if(ur(o)!==e)throw new Jt(`Invalid $type: must be ${e}, got ${o}`);return function(e,t,r){const o=dr(e,"Record",t.record,r);if(!o.success)throw o.error;return o.value}(this,r,t)}assertValidXrpcParams(e,t){return e=ur(e),function(e,t,r){if(t.parameters){const o=function(e,t,r,o){const n=o&&"object"==typeof o?o:{},i=new Set(r.required??[]);let a=n;if("object"==typeof r.properties)for(const t in r.properties){const o=r.properties[t],s="array"===o.type?cr(e,t,o,n[t]):er(0,t,o,n[t]),p=s.success?s.value:n[t],c=void 0===p;if(c&&i.has(t))return{success:!1,error:new Jt(`Params must have the property "${t}"`)};if(!c&&!s.success)return s;p!==n[t]&&(a===n&&(a={...n}),a[t]=p)}return{success:!0,value:a}}(e,0,t.parameters,r);if(!o.success)throw o.error;return o.value}}(this,this.getDefOrThrow(e,["query","procedure","subscription"]),t)}assertValidXrpcInput(e,t){return e=ur(e),function(e,t,r){if(t.input?.schema)return mr(e,"Input",t.input.schema,r,!0)}(this,this.getDefOrThrow(e,["procedure"]),t)}assertValidXrpcOutput(e,t){return e=ur(e),function(e,t,r){if(t.output?.schema)return mr(e,"Output",t.output.schema,r,!0)}(this,this.getDefOrThrow(e,["query","procedure"]),t)}assertValidXrpcMessage(e,t){return e=ur(e),function(e,t,r){if(t.message?.schema)return mr(e,"Message",t.message.schema,r,!0)}(this,this.getDefOrThrow(e,["subscription"]),t)}resolveLexUri(e,t){return e=ur(e),ur(t,e)}};function*hr(e){for(const t in e.defs)yield[`lex:${e.id}#${t}`,e.defs[t]],"main"===t&&(yield[`lex:${e.id}`,e.defs[t]])}function gr(e,t,r){for(const r in e)"ref"===e.type?e.ref=ur(e.ref,t):"union"===e.type?e.refs=e.refs.map((e=>ur(e,t))):Array.isArray(e[r])?e[r]=e[r].map((e=>"string"==typeof e?e.startsWith("#")?ur(e,t):e:e&&"object"==typeof e?gr(e,t):e)):e[r]&&"object"==typeof e[r]&&(e[r]=gr(e[r],t));if(r&&"subscription"===e?.defs?.main?.type){const r=e.defs.main;r.message?.codes&&(r.message.codes=Object.entries(r.message.codes).reduce(((e,[r,o])=>Object.assign(e,{[ur(r,t)]:o})),{}))}return e}function vr(e,t){if("string"===e||"unknown"===e)return String(t);if("number"===e)return String(Number(t));if("integer"===e)return String(0|Number(t));if("boolean"===e)return t?"true":"false";if("datetime"===e)return t instanceof Date?t.toISOString():String(t);throw new Error(`Unsupported query param type: ${e}`)}function br(e,t){if(e["Content-Type"]&&void 0!==t)return t instanceof ArrayBuffer?t:e["Content-Type"].startsWith("text/")?(new TextEncoder).encode(t.toString()):e["Content-Type"].startsWith("application/json")?(new TextEncoder).encode(JSON.stringify(t)):t}function wr(e,t){if(e){if(e.includes("application/json")&&t?.byteLength)try{const e=(new TextDecoder).decode(t);return JSON.parse(e)}catch(e){throw new mt(2,`Failed to parse response body: ${String(e)}`)}if(e.startsWith("text/")&&t?.byteLength)try{return(new TextDecoder).decode(t)}catch(e){throw new mt(2,`Failed to parse response body: ${String(e)}`)}}return t}var xr=class{constructor(){this.fetch=_r,this.lex=new fr}async call(e,t,r,o,n){return this.service(e).call(t,r,o,n)}service(e){return new kr(this,e)}addLexicon(e){this.lex.add(e)}addLexicons(e){for(const t of e)this.addLexicon(t)}removeLexicon(e){this.lex.remove(e)}},kr=class{constructor(e,t){this.headers={},this.baseClient=e,this.uri="string"==typeof t?new URL(t):t}setHeader(e,t){this.headers[e]=t}unsetHeader(e){delete this.headers[e]}async call(e,t,r,o){const n=this.baseClient.lex.getDefOrThrow(e);if(!n||"query"!==n.type&&"procedure"!==n.type)throw new Error(`Invalid lexicon: ${e}. Must be a query or procedure.`);const i="procedure"===n.type?"post":"get",a=function(e,t,r,o){const n=new URL(r);if(n.pathname=`/xrpc/${e}`,o)for(const[e,r]of Object.entries(o)){const o=t.parameters?.properties?.[e];if(!o)throw new Error(`Invalid query parameter: ${e}`);void 0!==r&&("array"===o.type?[].concat(r).forEach((t=>{n.searchParams.append(e,vr(o.items.type,t))})):n.searchParams.set(e,vr(o.type,r)))}return n.toString()}(e,n,this.uri,t),s=function(e,t,r){const o=r?.headers||{};return"procedure"===e.type&&(r?.encoding&&(o["Content-Type"]=r.encoding),t&&"object"==typeof t&&(o["Content-Type"]||(o["Content-Type"]="application/json"))),o}(n,r,{headers:{...this.headers,...o?.headers},encoding:o?.encoding}),p=await this.baseClient.fetch(a,i,s,r),c=function(e){let t;return t=e in dt?e:e>=100&&e<200?404:e>=200&&e<300?200:e>=300&&e<400?404:e>=400&&e<500?400:500,t}(p.status);if(200===c){try{this.baseClient.lex.assertValidXrpcOutput(e,p.body)}catch(t){throw t instanceof Jt?new yt(e,t,p.body):t}return new class{constructor(e,t){this.data=e,this.headers=t,this.success=!0}}(p.body,p.headers)}throw p.body&&(d=p.body,ct.safeParse(d).success)?new mt(c,p.body.error,p.body.message):new mt(c);var d}};async function _r(e,t,r,o){try{const n={method:t,headers:r,body:br(r,o),duplex:"half"},i=await fetch(e,n),a=await i.arrayBuffer();return{status:i.status,headers:Object.fromEntries(i.headers.entries()),body:wr(i.headers.get("content-type"),a)}}catch(e){throw new mt(1,String(e))}}new xr;var Ar=Object.values({ComAtprotoAccountCreate:{lexicon:1,id:"com.atproto.account.create",defs:{main:{type:"procedure",description:"Create an account.",input:{encoding:"application/json",schema:{type:"object",required:["handle","email","password"],properties:{email:{type:"string"},handle:{type:"string"},inviteCode:{type:"string"},password:{type:"string"},recoveryKey:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"object",required:["accessJwt","refreshJwt","handle","did"],properties:{accessJwt:{type:"string"},refreshJwt:{type:"string"},handle:{type:"string"},did:{type:"string"}}}},errors:[{name:"InvalidHandle"},{name:"InvalidPassword"},{name:"InvalidInviteCode"},{name:"HandleNotAvailable"}]}}},ComAtprotoAccountCreateInviteCode:{lexicon:1,id:"com.atproto.account.createInviteCode",defs:{main:{type:"procedure",description:"Create an invite code.",input:{encoding:"application/json",schema:{type:"object",required:["useCount"],properties:{useCount:{type:"integer"}}}},output:{encoding:"application/json",schema:{type:"object",required:["code"],properties:{code:{type:"string"}}}}}}},ComAtprotoAccountDelete:{lexicon:1,id:"com.atproto.account.delete",defs:{main:{type:"procedure",description:"Delete a user account with a token and password.",input:{encoding:"application/json",schema:{type:"object",required:["did","password","token"],properties:{did:{type:"string"},password:{type:"string"},token:{type:"string"}}}},errors:[{name:"ExpiredToken"},{name:"InvalidToken"}]}}},ComAtprotoAccountGet:{lexicon:1,id:"com.atproto.account.get",defs:{main:{type:"query",description:"Get information about an account."}}},ComAtprotoAccountRequestDelete:{lexicon:1,id:"com.atproto.account.requestDelete",defs:{main:{type:"procedure",description:"Initiate a user account deletion via email."}}},ComAtprotoAccountRequestPasswordReset:{lexicon:1,id:"com.atproto.account.requestPasswordReset",defs:{main:{type:"procedure",description:"Initiate a user account password reset via email.",input:{encoding:"application/json",schema:{type:"object",required:["email"],properties:{email:{type:"string"}}}}}}},ComAtprotoAccountResetPassword:{lexicon:1,id:"com.atproto.account.resetPassword",defs:{main:{type:"procedure",description:"Reset a user account password using a token.",input:{encoding:"application/json",schema:{type:"object",required:["token","password"],properties:{token:{type:"string"},password:{type:"string"}}}},errors:[{name:"ExpiredToken"},{name:"InvalidToken"}]}}},ComAtprotoAdminBlob:{lexicon:1,id:"com.atproto.admin.blob",defs:{view:{type:"object",required:["cid","mimeType","size","createdAt"],properties:{cid:{type:"string"},mimeType:{type:"string"},size:{type:"integer"},createdAt:{type:"datetime"},details:{type:"union",refs:["lex:com.atproto.admin.blob#imageDetails","lex:com.atproto.admin.blob#videoDetails"]},moderation:{type:"ref",ref:"lex:com.atproto.admin.blob#moderation"}}},imageDetails:{type:"object",required:["width","height"],properties:{width:{type:"integer"},height:{type:"integer"}}},videoDetails:{type:"object",required:["width","height","length"],properties:{width:{type:"integer"},height:{type:"integer"},length:{type:"integer"}}},moderation:{type:"object",required:[],properties:{currentAction:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#viewCurrent"}}}}},ComAtprotoAdminGetModerationAction:{lexicon:1,id:"com.atproto.admin.getModerationAction",defs:{main:{type:"query",description:"View details about a moderation action.",parameters:{type:"params",required:["id"],properties:{id:{type:"integer"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#viewDetail"}}}}},ComAtprotoAdminGetModerationActions:{lexicon:1,id:"com.atproto.admin.getModerationActions",defs:{main:{type:"query",description:"List moderation actions related to a subject.",parameters:{type:"params",properties:{subject:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},before:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["actions"],properties:{cursor:{type:"string"},actions:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#view"}}}}}}}},ComAtprotoAdminGetModerationReport:{lexicon:1,id:"com.atproto.admin.getModerationReport",defs:{main:{type:"query",description:"View details about a moderation report.",parameters:{type:"params",required:["id"],properties:{id:{type:"integer"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.moderationReport#viewDetail"}}}}},ComAtprotoAdminGetModerationReports:{lexicon:1,id:"com.atproto.admin.getModerationReports",defs:{main:{type:"query",description:"List moderation reports related to a subject.",parameters:{type:"params",properties:{subject:{type:"string"},resolved:{type:"boolean"},limit:{type:"integer",minimum:1,maximum:100,default:50},before:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["reports"],properties:{cursor:{type:"string"},reports:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.moderationReport#view"}}}}}}}},ComAtprotoAdminGetRecord:{lexicon:1,id:"com.atproto.admin.getRecord",defs:{main:{type:"query",description:"View details about a record.",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string"},cid:{type:"string"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.record#viewDetail"}}}}},ComAtprotoAdminGetRepo:{lexicon:1,id:"com.atproto.admin.getRepo",defs:{main:{type:"query",description:"View details about a repository.",parameters:{type:"params",required:["did"],properties:{did:{type:"string"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.repo#viewDetail"}}}}},ComAtprotoAdminModerationAction:{lexicon:1,id:"com.atproto.admin.moderationAction",defs:{view:{type:"object",required:["id","action","subject","subjectBlobCids","reason","createdBy","createdAt","resolvedReportIds"],properties:{id:{type:"integer"},action:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#actionType"},subject:{type:"union",refs:["lex:com.atproto.repo.repoRef","lex:com.atproto.repo.strongRef"]},subjectBlobCids:{type:"array",items:{type:"string"}},reason:{type:"string"},createdBy:{type:"string"},createdAt:{type:"string"},reversal:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#reversal"},resolvedReportIds:{type:"array",items:{type:"integer"}}}},viewDetail:{type:"object",required:["id","action","subject","subjectBlobs","reason","createdBy","createdAt","resolvedReports"],properties:{id:{type:"integer"},action:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#actionType"},subject:{type:"union",refs:["lex:com.atproto.admin.repo#view","lex:com.atproto.admin.record#view"]},subjectBlobs:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.blob#view"}},reason:{type:"string"},createdBy:{type:"string"},createdAt:{type:"string"},reversal:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#reversal"},resolvedReports:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.moderationReport#view"}}}},viewCurrent:{type:"object",required:["id","action"],properties:{id:{type:"integer"},action:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#actionType"}}},reversal:{type:"object",required:["reason","createdBy","createdAt"],properties:{reason:{type:"string"},createdBy:{type:"string"},createdAt:{type:"string"}}},actionType:{type:"string",knownValues:["com.atproto.admin.moderationAction#takedown","com.atproto.admin.moderationAction#flag","com.atproto.admin.moderationAction#acknowledge"]},takedown:{type:"token",description:"Moderation action type: Takedown. Indicates that content should not be served by the PDS."},flag:{type:"token",description:"Moderation action type: Flag. Indicates that the content was reviewed and considered to violate PDS rules, but may still be served."},acknowledge:{type:"token",description:"Moderation action type: Acknowledge. Indicates that the content was reviewed and not considered to violate PDS rules."}}},ComAtprotoAdminModerationReport:{lexicon:1,id:"com.atproto.admin.moderationReport",defs:{view:{type:"object",required:["id","reasonType","subject","reportedByDid","createdAt","resolvedByActionIds"],properties:{id:{type:"integer"},reasonType:{type:"ref",ref:"lex:com.atproto.report.reasonType"},reason:{type:"string"},subject:{type:"union",refs:["lex:com.atproto.repo.repoRef","lex:com.atproto.repo.strongRef"]},reportedByDid:{type:"string"},createdAt:{type:"datetime"},resolvedByActionIds:{type:"array",items:{type:"integer"}}}},viewDetail:{type:"object",required:["id","reasonType","subject","reportedByDid","createdAt","resolvedByActions"],properties:{id:{type:"integer"},reasonType:{type:"ref",ref:"lex:com.atproto.report.reasonType"},reason:{type:"string"},subject:{type:"union",refs:["lex:com.atproto.admin.repo#view","lex:com.atproto.admin.record#view"]},reportedByDid:{type:"string"},createdAt:{type:"datetime"},resolvedByActions:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#view"}}}}}},ComAtprotoAdminRecord:{lexicon:1,id:"com.atproto.admin.record",defs:{view:{type:"object",required:["uri","cid","value","blobCids","indexedAt","moderation","repo"],properties:{uri:{type:"string"},cid:{type:"string"},value:{type:"unknown"},blobCids:{type:"array",items:{type:"string"}},indexedAt:{type:"string"},moderation:{type:"ref",ref:"lex:com.atproto.admin.record#moderation"},repo:{type:"ref",ref:"lex:com.atproto.admin.repo#view"}}},viewDetail:{type:"object",required:["uri","cid","value","blobs","indexedAt","moderation","repo"],properties:{uri:{type:"string"},cid:{type:"string"},value:{type:"unknown"},blobs:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.blob#view"}},indexedAt:{type:"string"},moderation:{type:"ref",ref:"lex:com.atproto.admin.record#moderationDetail"},repo:{type:"ref",ref:"lex:com.atproto.admin.repo#view"}}},moderation:{type:"object",required:[],properties:{currentAction:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#viewCurrent"}}},moderationDetail:{type:"object",required:["actions","reports"],properties:{currentAction:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#viewCurrent"},actions:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#view"}},reports:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.moderationReport#view"}}}}}},ComAtprotoAdminRepo:{lexicon:1,id:"com.atproto.admin.repo",defs:{view:{type:"object",required:["did","handle","relatedRecords","indexedAt","moderation"],properties:{did:{type:"string"},handle:{type:"string"},account:{type:"ref",ref:"lex:com.atproto.admin.repo#account"},relatedRecords:{type:"array",items:{type:"unknown"}},indexedAt:{type:"string"},moderation:{type:"ref",ref:"lex:com.atproto.admin.repo#moderation"}}},viewDetail:{type:"object",required:["did","handle","relatedRecords","indexedAt","moderation"],properties:{did:{type:"string"},handle:{type:"string"},account:{type:"ref",ref:"lex:com.atproto.admin.repo#account"},relatedRecords:{type:"array",items:{type:"unknown"}},indexedAt:{type:"string"},moderation:{type:"ref",ref:"lex:com.atproto.admin.repo#moderationDetail"}}},account:{type:"object",required:["email"],properties:{email:{type:"string"}}},moderation:{type:"object",required:[],properties:{currentAction:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#viewCurrent"}}},moderationDetail:{type:"object",required:["actions","reports"],properties:{currentAction:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#viewCurrent"},actions:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#view"}},reports:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.moderationReport#view"}}}}}},ComAtprotoAdminResolveModerationReports:{lexicon:1,id:"com.atproto.admin.resolveModerationReports",defs:{main:{type:"procedure",description:"Resolve moderation reports by an action.",input:{encoding:"application/json",schema:{type:"object",required:["actionId","reportIds","createdBy"],properties:{actionId:{type:"integer"},reportIds:{type:"array",items:{type:"integer"}},createdBy:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#view"}}}}},ComAtprotoAdminReverseModerationAction:{lexicon:1,id:"com.atproto.admin.reverseModerationAction",defs:{main:{type:"procedure",description:"Reverse a moderation action.",input:{encoding:"application/json",schema:{type:"object",required:["id","reason","createdBy"],properties:{id:{type:"integer"},reason:{type:"string"},createdBy:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#view"}}}}},ComAtprotoAdminSearchRepos:{lexicon:1,id:"com.atproto.admin.searchRepos",defs:{main:{type:"query",description:"Find repositories based on a search term.",parameters:{type:"params",properties:{term:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},before:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["repos"],properties:{cursor:{type:"string"},repos:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.repo#view"}}}}}}}},ComAtprotoAdminTakeModerationAction:{lexicon:1,id:"com.atproto.admin.takeModerationAction",defs:{main:{type:"procedure",description:"Take a moderation action on a repo.",input:{encoding:"application/json",schema:{type:"object",required:["action","subject","reason","createdBy"],properties:{action:{type:"string",knownValues:["com.atproto.admin.moderationAction#takedown","com.atproto.admin.moderationAction#flag","com.atproto.admin.moderationAction#acknowledge"]},subject:{type:"union",refs:["lex:com.atproto.repo.repoRef","lex:com.atproto.repo.recordRef"]},subjectBlobCids:{type:"array",items:{type:"string"}},reason:{type:"string"},createdBy:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.moderationAction#view"}},errors:[{name:"SubjectHasAction"}]}}},ComAtprotoBlobUpload:{lexicon:1,id:"com.atproto.blob.upload",defs:{main:{type:"procedure",description:"Upload a new blob to be added to repo in a later request.",input:{encoding:"*/*"},output:{encoding:"application/json",schema:{type:"object",required:["cid"],properties:{cid:{type:"string"}}}}}}},ComAtprotoHandleResolve:{lexicon:1,id:"com.atproto.handle.resolve",defs:{main:{type:"query",description:"Provides the DID of a repo.",parameters:{type:"params",properties:{handle:{type:"string",description:"The handle to resolve. If not supplied, will resolve the host's own handle."}}},output:{encoding:"application/json",schema:{type:"object",required:["did"],properties:{did:{type:"string"}}}}}}},ComAtprotoHandleUpdate:{lexicon:1,id:"com.atproto.handle.update",defs:{main:{type:"procedure",description:"Updates the handle of the account",input:{encoding:"application/json",schema:{type:"object",required:["handle"],properties:{handle:{type:"string"}}}}}}},ComAtprotoRepoBatchWrite:{lexicon:1,id:"com.atproto.repo.batchWrite",defs:{main:{type:"procedure",description:"Apply a batch transaction of creates, puts, and deletes.",input:{encoding:"application/json",schema:{type:"object",required:["did","writes"],properties:{did:{type:"string",description:"The DID of the repo."},validate:{type:"boolean",default:!0,description:"Validate the records?"},writes:{type:"array",items:{type:"union",refs:["lex:com.atproto.repo.batchWrite#create","lex:com.atproto.repo.batchWrite#update","lex:com.atproto.repo.batchWrite#delete"],closed:!0}}}}}},create:{type:"object",required:["action","collection","value"],properties:{action:{type:"string",const:"create"},collection:{type:"string"},rkey:{type:"string"},value:{type:"unknown"}}},update:{type:"object",required:["action","collection","rkey","value"],properties:{action:{type:"string",const:"update"},collection:{type:"string"},rkey:{type:"string"},value:{type:"unknown"}}},delete:{type:"object",required:["action","collection","rkey"],properties:{action:{type:"string",const:"delete"},collection:{type:"string"},rkey:{type:"string"}}}}},ComAtprotoRepoCreateRecord:{lexicon:1,id:"com.atproto.repo.createRecord",defs:{main:{type:"procedure",description:"Create a new record.",input:{encoding:"application/json",schema:{type:"object",required:["did","collection","record"],properties:{did:{type:"string",description:"The DID of the repo."},collection:{type:"string",description:"The NSID of the record collection."},validate:{type:"boolean",default:!0,description:"Validate the record?"},record:{type:"unknown",description:"The record to create."}}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","cid"],properties:{uri:{type:"string"},cid:{type:"string"}}}}}}},ComAtprotoRepoDeleteRecord:{lexicon:1,id:"com.atproto.repo.deleteRecord",defs:{main:{type:"procedure",description:"Delete a record.",input:{encoding:"application/json",schema:{type:"object",required:["did","collection","rkey"],properties:{did:{type:"string",description:"The DID of the repo."},collection:{type:"string",description:"The NSID of the record collection."},rkey:{type:"string",description:"The key of the record."}}}}}}},ComAtprotoRepoDescribe:{lexicon:1,id:"com.atproto.repo.describe",defs:{main:{type:"query",description:"Get information about the repo, including the list of collections.",parameters:{type:"params",required:["user"],properties:{user:{type:"string",description:"The handle or DID of the repo."}}},output:{encoding:"application/json",schema:{type:"object",required:["handle","did","didDoc","collections","handleIsCorrect"],properties:{handle:{type:"string"},did:{type:"string"},didDoc:{type:"unknown"},collections:{type:"array",items:{type:"string"}},handleIsCorrect:{type:"boolean"}}}}}}},ComAtprotoRepoGetRecord:{lexicon:1,id:"com.atproto.repo.getRecord",defs:{main:{type:"query",description:"Fetch a record.",parameters:{type:"params",required:["user","collection","rkey"],properties:{user:{type:"string",description:"The handle or DID of the repo."},collection:{type:"string",description:"The NSID of the collection."},rkey:{type:"string",description:"The key of the record."},cid:{type:"string",description:"The CID of the version of the record. If not specified, then return the most recent version."}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","value"],properties:{uri:{type:"string"},cid:{type:"string"},value:{type:"unknown"}}}}}}},ComAtprotoRepoListRecords:{lexicon:1,id:"com.atproto.repo.listRecords",defs:{main:{type:"query",description:"List a range of records in a collection.",parameters:{type:"params",required:["user","collection"],properties:{user:{type:"string",description:"The handle or DID of the repo."},collection:{type:"string",description:"The NSID of the record type."},limit:{type:"integer",minimum:1,maximum:100,default:50,description:"The number of records to return."},before:{type:"string",description:"A TID to filter the range of records returned."},after:{type:"string",description:"A TID to filter the range of records returned."},reverse:{type:"boolean",description:"Reverse the order of the returned records?"}}},output:{encoding:"application/json",schema:{type:"object",required:["records"],properties:{cursor:{type:"string"},records:{type:"array",items:{type:"ref",ref:"lex:com.atproto.repo.listRecords#record"}}}}}},record:{type:"object",required:["uri","cid","value"],properties:{uri:{type:"string"},cid:{type:"string"},value:{type:"unknown"}}}}},ComAtprotoRepoPutRecord:{lexicon:1,id:"com.atproto.repo.putRecord",defs:{main:{type:"procedure",description:"Write a record.",input:{encoding:"application/json",schema:{type:"object",required:["did","collection","rkey","record"],properties:{did:{type:"string",description:"The DID of the repo."},collection:{type:"string",description:"The NSID of the record type."},rkey:{type:"string",description:"The TID of the record."},validate:{type:"boolean",default:!0,description:"Validate the record?"},record:{type:"unknown",description:"The record to create."}}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","cid"],properties:{uri:{type:"string"},cid:{type:"string"}}}}}}},ComAtprotoRepoRecordRef:{lexicon:1,id:"com.atproto.repo.recordRef",description:"A URI with optional content-hash fingerprint.",defs:{main:{type:"object",required:["uri"],properties:{uri:{type:"string"},cid:{type:"string"}}}}},ComAtprotoRepoRepoRef:{lexicon:1,id:"com.atproto.repo.repoRef",description:"A did identifying a repository.",defs:{main:{type:"object",required:["did"],properties:{did:{type:"string"}}}}},ComAtprotoRepoStrongRef:{lexicon:1,id:"com.atproto.repo.strongRef",description:"A URI with a content-hash fingerprint.",defs:{main:{type:"object",required:["uri","cid"],properties:{uri:{type:"string"},cid:{type:"string"}}}}},ComAtprotoReportCreate:{lexicon:1,id:"com.atproto.report.create",defs:{main:{type:"procedure",description:"Report a repo or a record.",input:{encoding:"application/json",schema:{type:"object",required:["reasonType","subject"],properties:{reasonType:{type:"ref",ref:"lex:com.atproto.report.reasonType"},reason:{type:"string"},subject:{type:"union",refs:["lex:com.atproto.repo.repoRef","lex:com.atproto.repo.recordRef"]}}}},output:{encoding:"application/json",schema:{type:"object",required:["id","reasonType","subject","reportedByDid","createdAt"],properties:{id:{type:"integer"},reasonType:{type:"ref",ref:"lex:com.atproto.report.reasonType"},reason:{type:"string"},subject:{type:"union",refs:["lex:com.atproto.repo.repoRef","lex:com.atproto.repo.strongRef"]},reportedByDid:{type:"string"},createdAt:{type:"datetime"}}}}}}},ComAtprotoReportReasonType:{lexicon:1,id:"com.atproto.report.reasonType",defs:{main:{type:"string",knownValues:["com.atproto.report.reasonType#spam","com.atproto.report.reasonType#other"]},spam:{type:"token",description:"Moderation report reason: Spam."},other:{type:"token",description:"Moderation report reason: Other."}}},ComAtprotoReportSubject:{lexicon:1,id:"com.atproto.report.subject",defs:{repo:{type:"object",required:["did"],properties:{did:{type:"string",description:"The DID of the repo."}}},record:{type:"object",required:["did","collection","rkey"],properties:{did:{type:"string",description:"The DID of the repo."},collection:{type:"string",description:"The NSID of the collection."},rkey:{type:"string",description:"The key of the record."},cid:{type:"string",description:"The CID of the version of the record. If not specified, defaults to the most recent version."}}},recordRef:{type:"object",required:["uri","cid"],properties:{uri:{type:"string"},cid:{type:"string"}}}}},ComAtprotoServerGetAccountsConfig:{lexicon:1,id:"com.atproto.server.getAccountsConfig",defs:{main:{type:"query",description:"Get a document describing the service's accounts configuration.",output:{encoding:"application/json",schema:{type:"object",required:["availableUserDomains"],properties:{inviteCodeRequired:{type:"boolean"},availableUserDomains:{type:"array",items:{type:"string"}},links:{type:"ref",ref:"lex:com.atproto.server.getAccountsConfig#links"}}}}},links:{type:"object",properties:{privacyPolicy:{type:"string"},termsOfService:{type:"string"}}}}},ComAtprotoSessionCreate:{lexicon:1,id:"com.atproto.session.create",defs:{main:{type:"procedure",description:"Create an authentication session.",input:{encoding:"application/json",schema:{type:"object",required:["password"],properties:{identifier:{type:"string",description:"Handle or other identifier supported by the server for the authenticating user."},password:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"object",required:["accessJwt","refreshJwt","handle","did"],properties:{accessJwt:{type:"string"},refreshJwt:{type:"string"},handle:{type:"string"},did:{type:"string"}}}},errors:[{name:"AccountTakedown"}]}}},ComAtprotoSessionDelete:{lexicon:1,id:"com.atproto.session.delete",defs:{main:{type:"procedure",description:"Delete the current session."}}},ComAtprotoSessionGet:{lexicon:1,id:"com.atproto.session.get",defs:{main:{type:"query",description:"Get information about the current session.",output:{encoding:"application/json",schema:{type:"object",required:["handle","did"],properties:{handle:{type:"string"},did:{type:"string"}}}}}}},ComAtprotoSessionRefresh:{lexicon:1,id:"com.atproto.session.refresh",defs:{main:{type:"procedure",description:"Refresh an authentication session.",output:{encoding:"application/json",schema:{type:"object",required:["accessJwt","refreshJwt","handle","did"],properties:{accessJwt:{type:"string"},refreshJwt:{type:"string"},handle:{type:"string"},did:{type:"string"}}}},errors:[{name:"AccountTakedown"}]}}},ComAtprotoSyncGetBlocks:{lexicon:1,id:"com.atproto.sync.getBlocks",defs:{main:{type:"query",description:"Gets blocks from a given repo.",parameters:{type:"params",required:["did","cids"],properties:{did:{type:"string",description:"The DID of the repo."},cids:{type:"array",items:{type:"string"}}}},output:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoSyncGetCheckout:{lexicon:1,id:"com.atproto.sync.getCheckout",defs:{main:{type:"query",description:"Gets the repo state.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",description:"The DID of the repo."},commit:{type:"string",description:"The commit to get the checkout from. Defaults to current HEAD."}}},output:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoSyncGetCommitPath:{lexicon:1,id:"com.atproto.sync.getCommitPath",defs:{main:{type:"query",description:"Gets the path of repo commits",parameters:{type:"params",required:["did"],properties:{did:{type:"string",description:"The DID of the repo."},latest:{type:"string",description:"The most recent commit"},earliest:{type:"string",description:"The earliest commit to start from"}}},output:{encoding:"application/json",schema:{type:"object",required:["commits"],properties:{commits:{type:"array",items:{type:"string"}}}}}}}},ComAtprotoSyncGetHead:{lexicon:1,id:"com.atproto.sync.getHead",defs:{main:{type:"query",description:"Gets the current HEAD CID of a repo.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",description:"The DID of the repo."}}},output:{encoding:"application/json",schema:{type:"object",required:["root"],properties:{root:{type:"string"}}}}}}},ComAtprotoSyncGetRecord:{lexicon:1,id:"com.atproto.sync.getRecord",defs:{main:{type:"query",description:"Gets blocks needed for existence or non-existence of record.",parameters:{type:"params",required:["did","collection","rkey"],properties:{did:{type:"string",description:"The DID of the repo."},collection:{type:"string"},rkey:{type:"string"},commit:{type:"string",description:"An optional past commit CID."}}},output:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoSyncGetRepo:{lexicon:1,id:"com.atproto.sync.getRepo",defs:{main:{type:"query",description:"Gets the repo state.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",description:"The DID of the repo."},earliest:{type:"string",description:"The earliest commit in the commit range (not inclusive)"},latest:{type:"string",description:"The latest commit you in the commit range (inclusive"}}},output:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoSyncNotifyOfUpdate:{lexicon:1,id:"com.atproto.sync.notifyOfUpdate",defs:{main:{type:"query",description:"Notify a crawling service of a recent update. Often when a long break between updates causes the connection with the crawling service to break."}}},ComAtprotoSyncRequestCrawl:{lexicon:1,id:"com.atproto.sync.requestCrawl",defs:{main:{type:"query",description:"Request a service to persistently crawl hosted repos.",parameters:{type:"params",required:["hostname"],properties:{host:{type:"string",description:"Hostname of the service that is requesting to be crawled."}}}}}},ComAtprotoSyncSubscribeAllRepos:{lexicon:1,id:"com.atproto.sync.subscribeAllRepos",defs:{main:{type:"subscription",description:"Subscribe to repo updates",parameters:{type:"params",properties:{cursor:{type:"integer",description:"The last known event to backfill from."}}},message:{schema:{type:"object",required:["seq","event","repo","commit","prev","blocks","blobs","time"],nullable:["prev"],properties:{seq:{type:"integer"},event:{type:"string",knownValues:["repo_append","rebase"]},repo:{type:"string"},commit:{type:"string"},prev:{type:"string"},blocks:{type:"unknown"},blobs:{type:"array",items:{type:"string"}},time:{type:"datetime"}}}},infos:[{name:"OutdatedCursor"}],errors:[{name:"FutureCursor"}]}}},AppBskyActorGetProfile:{lexicon:1,id:"app.bsky.actor.getProfile",defs:{main:{type:"query",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:app.bsky.actor.profile#view"}}}}},AppBskyActorGetProfiles:{lexicon:1,id:"app.bsky.actor.getProfiles",defs:{main:{type:"query",parameters:{type:"params",required:["actors"],properties:{actors:{type:"array",items:{type:"string"},maxLength:25}}},output:{encoding:"application/json",schema:{type:"object",required:["profiles"],properties:{profiles:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.profile#view"}}}}}}}},AppBskyActorGetSuggestions:{lexicon:1,id:"app.bsky.actor.getSuggestions",defs:{main:{type:"query",description:"Get a list of actors suggested for following. Used in discovery UIs.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["actors"],properties:{cursor:{type:"string"},actors:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.profile#viewBasic"}}}}}}}},AppBskyActorProfile:{lexicon:1,id:"app.bsky.actor.profile",defs:{main:{type:"record",key:"literal:self",record:{type:"object",required:["displayName"],properties:{displayName:{type:"string",maxLength:64},description:{type:"string",maxLength:256},avatar:{type:"image",accept:["image/png","image/jpeg"],maxWidth:2e3,maxHeight:2e3,maxSize:1e6},banner:{type:"image",accept:["image/png","image/jpeg"],maxWidth:6e3,maxHeight:2e3,maxSize:1e6}}}},view:{type:"object",required:["did","declaration","handle","creator","followersCount","followsCount","postsCount"],properties:{did:{type:"string"},declaration:{type:"ref",ref:"lex:app.bsky.system.declRef"},handle:{type:"string"},displayName:{type:"string",maxLength:64},description:{type:"string",maxLength:256},avatar:{type:"string"},banner:{type:"string"},followersCount:{type:"integer"},followsCount:{type:"integer"},postsCount:{type:"integer"},creator:{type:"string"},indexedAt:{type:"datetime"},viewer:{type:"ref",ref:"lex:app.bsky.actor.profile#viewerState"},myState:{type:"ref",ref:"lex:app.bsky.actor.profile#myState",description:"Deprecated"}}},viewBasic:{type:"object",required:["did","declaration","handle"],properties:{did:{type:"string"},declaration:{type:"ref",ref:"lex:app.bsky.system.declRef"},handle:{type:"string"},displayName:{type:"string",maxLength:64},description:{type:"string",maxLength:256},avatar:{type:"string"},indexedAt:{type:"datetime"},viewer:{type:"ref",ref:"lex:app.bsky.actor.profile#viewerState"}}},viewerState:{type:"object",properties:{muted:{type:"boolean"},following:{type:"string"},followedBy:{type:"string"}}},myState:{type:"object",description:"Deprecated in favor of #viewerState",properties:{follow:{type:"string"},muted:{type:"boolean"}}}}},AppBskyActorRef:{lexicon:1,id:"app.bsky.actor.ref",description:"A reference to an actor in the network.",defs:{main:{type:"object",required:["did","declarationCid"],properties:{did:{type:"string"},declarationCid:{type:"string"}}},withInfo:{type:"object",required:["did","declaration","handle"],properties:{did:{type:"string"},declaration:{type:"ref",ref:"lex:app.bsky.system.declRef"},handle:{type:"string"},displayName:{type:"string",maxLength:64},avatar:{type:"string"},viewer:{type:"ref",ref:"lex:app.bsky.actor.ref#viewerState"}}},viewerState:{type:"object",properties:{muted:{type:"boolean"},following:{type:"string"},followedBy:{type:"string"}}}}},AppBskyActorSearch:{lexicon:1,id:"app.bsky.actor.search",defs:{main:{type:"query",description:"Find users matching search criteria.",parameters:{type:"params",properties:{term:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},before:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["users"],properties:{cursor:{type:"string"},users:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.profile#viewBasic"}}}}}}}},AppBskyActorSearchTypeahead:{lexicon:1,id:"app.bsky.actor.searchTypeahead",defs:{main:{type:"query",description:"Find user suggestions for a search term.",parameters:{type:"params",properties:{term:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50}}},output:{encoding:"application/json",schema:{type:"object",required:["users"],properties:{users:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.ref#withInfo"}}}}}}}},AppBskyActorUpdateProfile:{lexicon:1,id:"app.bsky.actor.updateProfile",defs:{main:{type:"procedure",description:"Notify server that the user has seen notifications.",input:{encoding:"application/json",schema:{type:"object",nullable:["description","avatar","banner"],properties:{displayName:{type:"string",maxLength:64},description:{type:"string",maxLength:256},avatar:{type:"image",accept:["image/png","image/jpeg"],maxWidth:500,maxHeight:500,maxSize:1e5},banner:{type:"image",accept:["image/png","image/jpeg"],maxWidth:1500,maxHeight:500,maxSize:5e5}}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","cid","record"],properties:{uri:{type:"string"},cid:{type:"string"},record:{type:"unknown"}}}},errors:[{name:"InvalidBlob"},{name:"BlobTooLarge"},{name:"InvalidMimeType"},{name:"InvalidImageDimensions"}]}}},AppBskyEmbedExternal:{lexicon:1,id:"app.bsky.embed.external",description:"An representation of some externally linked content, embedded in another form of content",defs:{main:{type:"object",required:["external"],properties:{external:{type:"ref",ref:"lex:app.bsky.embed.external#external"}}},external:{type:"object",required:["uri","title","description"],properties:{uri:{type:"string"},title:{type:"string"},description:{type:"string"},thumb:{type:"image",accept:["image/*"],maxWidth:2e3,maxHeight:2e3,maxSize:1e6}}},presented:{type:"object",required:["external"],properties:{external:{type:"ref",ref:"lex:app.bsky.embed.external#presentedExternal"}}},presentedExternal:{type:"object",required:["uri","title","description"],properties:{uri:{type:"string"},title:{type:"string"},description:{type:"string"},thumb:{type:"string"}}}}},AppBskyEmbedImages:{lexicon:1,id:"app.bsky.embed.images",description:"A set of images embedded in some other form of content",defs:{main:{type:"object",required:["images"],properties:{images:{type:"array",items:{type:"ref",ref:"lex:app.bsky.embed.images#image"},maxLength:4}}},image:{type:"object",required:["image","alt"],properties:{image:{type:"image",accept:["image/*"],maxWidth:2e3,maxHeight:2e3,maxSize:1e6},alt:{type:"string"}}},presented:{type:"object",required:["images"],properties:{images:{type:"array",items:{type:"ref",ref:"lex:app.bsky.embed.images#presentedImage"},maxLength:4}}},presentedImage:{type:"object",required:["thumb","fullsize","alt"],properties:{thumb:{type:"string"},fullsize:{type:"string"},alt:{type:"string"}}}}},AppBskyEmbedRecord:{lexicon:1,id:"app.bsky.embed.record",description:"An representation of a record embedded in another form of content",defs:{main:{type:"object",required:["record"],properties:{record:{type:"ref",ref:"lex:com.atproto.repo.strongRef"}}},presented:{type:"object",required:["record"],properties:{record:{type:"union",refs:["lex:app.bsky.embed.record#presentedRecord","lex:app.bsky.embed.record#presentedNotFound"]}}},presentedRecord:{type:"object",required:["uri","cid","author","record"],properties:{uri:{type:"string"},cid:{type:"string"},author:{type:"ref",ref:"lex:app.bsky.actor.ref#withInfo"},record:{type:"unknown"}}},presentedNotFound:{type:"object",required:["uri"],properties:{uri:{type:"string"}}}}},AppBskyFeedFeedViewPost:{lexicon:1,id:"app.bsky.feed.feedViewPost",defs:{main:{type:"object",required:["post"],properties:{post:{type:"ref",ref:"lex:app.bsky.feed.post#view"},reply:{type:"ref",ref:"lex:app.bsky.feed.feedViewPost#replyRef"},reason:{type:"union",refs:["lex:app.bsky.feed.feedViewPost#reasonRepost"]}}},replyRef:{type:"object",required:["root","parent"],properties:{root:{type:"ref",ref:"lex:app.bsky.feed.post#view"},parent:{type:"ref",ref:"lex:app.bsky.feed.post#view"}}},reasonRepost:{type:"object",required:["by","indexedAt"],properties:{by:{type:"ref",ref:"lex:app.bsky.actor.ref#withInfo"},indexedAt:{type:"datetime"}}}}},AppBskyFeedGetAuthorFeed:{lexicon:1,id:"app.bsky.feed.getAuthorFeed",defs:{main:{type:"query",description:"A view of a user's feed.",parameters:{type:"params",required:["author"],properties:{author:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},before:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.feedViewPost"}}}}}}}},AppBskyFeedGetPostThread:{lexicon:1,id:"app.bsky.feed.getPostThread",defs:{main:{type:"query",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string"},depth:{type:"integer"}}},output:{encoding:"application/json",schema:{type:"object",required:["thread"],properties:{thread:{type:"union",refs:["lex:app.bsky.feed.getPostThread#threadViewPost","lex:app.bsky.feed.getPostThread#notFoundPost"]}}}},errors:[{name:"NotFound"}]},threadViewPost:{type:"object",required:["post"],properties:{post:{type:"ref",ref:"lex:app.bsky.feed.post#view"},parent:{type:"union",refs:["lex:app.bsky.feed.getPostThread#threadViewPost","lex:app.bsky.feed.getPostThread#notFoundPost"]},replies:{type:"array",items:{type:"union",refs:["lex:app.bsky.feed.getPostThread#threadViewPost","lex:app.bsky.feed.getPostThread#notFoundPost"]}}}},notFoundPost:{type:"object",required:["uri","notFound"],properties:{uri:{type:"string"},notFound:{type:"boolean",const:!0}}}}},AppBskyFeedGetRepostedBy:{lexicon:1,id:"app.bsky.feed.getRepostedBy",defs:{main:{type:"query",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string"},cid:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},before:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","repostedBy"],properties:{uri:{type:"string"},cid:{type:"string"},cursor:{type:"string"},repostedBy:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.ref#withInfo"}}}}}}}},AppBskyFeedGetTimeline:{lexicon:1,id:"app.bsky.feed.getTimeline",defs:{main:{type:"query",description:"A view of the user's home timeline.",parameters:{type:"params",properties:{algorithm:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},before:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.feedViewPost"}}}}}}}},AppBskyFeedGetVotes:{lexicon:1,id:"app.bsky.feed.getVotes",defs:{main:{type:"query",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string"},cid:{type:"string"},direction:{type:"string",enum:["up","down"]},limit:{type:"integer",minimum:1,maximum:100,default:50},before:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","votes"],properties:{uri:{type:"string"},cid:{type:"string"},cursor:{type:"string"},votes:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.getVotes#vote"}}}}}},vote:{type:"object",required:["direction","indexedAt","createdAt","actor"],properties:{direction:{type:"string",enum:["up","down"]},indexedAt:{type:"datetime"},createdAt:{type:"datetime"},actor:{type:"ref",ref:"lex:app.bsky.actor.ref#withInfo"}}}}},AppBskyFeedPost:{lexicon:1,id:"app.bsky.feed.post",defs:{main:{type:"record",key:"tid",record:{type:"object",required:["text","createdAt"],properties:{text:{type:"string",maxLength:256},entities:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.post#entity"}},reply:{type:"ref",ref:"lex:app.bsky.feed.post#replyRef"},embed:{type:"union",refs:["lex:app.bsky.embed.images","lex:app.bsky.embed.external","lex:app.bsky.embed.record"]},createdAt:{type:"datetime"}}}},replyRef:{type:"object",required:["root","parent"],properties:{root:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},parent:{type:"ref",ref:"lex:com.atproto.repo.strongRef"}}},entity:{type:"object",required:["index","type","value"],properties:{index:{type:"ref",ref:"lex:app.bsky.feed.post#textSlice"},type:{type:"string",description:"Expected values are 'mention', 'hashtag', and 'link'."},value:{type:"string"}}},textSlice:{type:"object",description:"A text segment. Start is inclusive, end is exclusive.",required:["start","end"],properties:{start:{type:"integer",minimum:0},end:{type:"integer",minimum:0}}},view:{type:"object",required:["uri","cid","author","record","replyCount","repostCount","upvoteCount","downvoteCount","indexedAt","viewer"],properties:{uri:{type:"string"},cid:{type:"string"},author:{type:"ref",ref:"lex:app.bsky.actor.ref#withInfo"},record:{type:"unknown"},embed:{type:"union",refs:["lex:app.bsky.embed.images#presented","lex:app.bsky.embed.external#presented","lex:app.bsky.embed.record#presented"]},replyCount:{type:"integer"},repostCount:{type:"integer"},upvoteCount:{type:"integer"},downvoteCount:{type:"integer"},indexedAt:{type:"datetime"},viewer:{type:"ref",ref:"lex:app.bsky.feed.post#viewerState"}}},viewerState:{type:"object",properties:{repost:{type:"string"},upvote:{type:"string"},downvote:{type:"string"}}}}},AppBskyFeedRepost:{lexicon:1,id:"app.bsky.feed.repost",defs:{main:{type:"record",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},createdAt:{type:"datetime"}}}}}},AppBskyFeedSetVote:{lexicon:1,id:"app.bsky.feed.setVote",defs:{main:{type:"procedure",description:"Upvote, downvote, or clear the user's vote for a post.",input:{encoding:"application/json",schema:{type:"object",required:["subject","direction"],properties:{subject:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},direction:{type:"string",enum:["up","down","none"]}}}},output:{encoding:"application/json",schema:{type:"object",properties:{upvote:{type:"string"},downvote:{type:"string"}}}}}}},AppBskyFeedVote:{lexicon:1,id:"app.bsky.feed.vote",defs:{main:{type:"record",key:"tid",record:{type:"object",required:["subject","direction","createdAt"],properties:{subject:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},direction:{type:"string",enum:["up","down"]},createdAt:{type:"datetime"}}}}}},AppBskyGraphAssertCreator:{lexicon:1,id:"app.bsky.graph.assertCreator",defs:{main:{type:"token",description:"Assertion type: Creator. Defined for app.bsky.graph.assertions's assertion."}}},AppBskyGraphAssertMember:{lexicon:1,id:"app.bsky.graph.assertMember",defs:{main:{type:"token",description:"Assertion type: Member. Defined for app.bsky.graph.assertions's assertion."}}},AppBskyGraphAssertion:{lexicon:1,id:"app.bsky.graph.assertion",defs:{main:{type:"record",key:"tid",record:{type:"object",required:["assertion","subject","createdAt"],properties:{assertion:{type:"string"},subject:{type:"ref",ref:"lex:app.bsky.actor.ref"},createdAt:{type:"datetime"}}}}}},AppBskyGraphConfirmation:{lexicon:1,id:"app.bsky.graph.confirmation",defs:{main:{type:"record",key:"tid",record:{type:"object",required:["originator","assertion","createdAt"],properties:{originator:{type:"ref",ref:"lex:app.bsky.actor.ref"},assertion:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},createdAt:{type:"datetime"}}}}}},AppBskyGraphFollow:{lexicon:1,id:"app.bsky.graph.follow",defs:{main:{type:"record",description:"A social follow.",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"ref",ref:"lex:app.bsky.actor.ref"},createdAt:{type:"datetime"}}}}}},AppBskyGraphGetFollowers:{lexicon:1,id:"app.bsky.graph.getFollowers",defs:{main:{type:"query",description:"Who is following a user?",parameters:{type:"params",required:["user"],properties:{user:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},before:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["subject","followers"],properties:{subject:{type:"ref",ref:"lex:app.bsky.actor.ref#withInfo"},cursor:{type:"string"},followers:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.ref#withInfo"}}}}}}}},AppBskyGraphGetFollows:{lexicon:1,id:"app.bsky.graph.getFollows",defs:{main:{type:"query",description:"Who is a user following?",parameters:{type:"params",required:["user"],properties:{user:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},before:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["subject","follows"],properties:{subject:{type:"ref",ref:"lex:app.bsky.actor.ref#withInfo"},cursor:{type:"string"},follows:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.ref#withInfo"}}}}}}}},AppBskyGraphGetMutes:{lexicon:1,id:"app.bsky.graph.getMutes",defs:{main:{type:"query",description:"Who does the viewer mute?",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},before:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["mutes"],properties:{cursor:{type:"string"},mutes:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.ref#withInfo"}}}}}}}},AppBskyGraphMute:{lexicon:1,id:"app.bsky.graph.mute",defs:{main:{type:"procedure",description:"Mute an actor by did or handle.",input:{encoding:"application/json",schema:{type:"object",required:["user"],properties:{user:{type:"string"}}}}}}},AppBskyGraphUnmute:{lexicon:1,id:"app.bsky.graph.unmute",defs:{main:{type:"procedure",description:"Unmute an actor by did or handle.",input:{encoding:"application/json",schema:{type:"object",required:["user"],properties:{user:{type:"string"}}}}}}},AppBskyNotificationGetCount:{lexicon:1,id:"app.bsky.notification.getCount",defs:{main:{type:"query",output:{encoding:"application/json",schema:{type:"object",required:["count"],properties:{count:{type:"integer"}}}}}}},AppBskyNotificationList:{lexicon:1,id:"app.bsky.notification.list",defs:{main:{type:"query",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},before:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["notifications"],properties:{cursor:{type:"string"},notifications:{type:"array",items:{type:"ref",ref:"lex:app.bsky.notification.list#notification"}}}}}},notification:{type:"object",required:["uri","cid","author","reason","record","isRead","indexedAt"],properties:{uri:{type:"string"},cid:{type:"string"},author:{type:"ref",ref:"lex:app.bsky.actor.ref#withInfo"},reason:{type:"string",description:"Expected values are 'vote', 'repost', 'follow', 'invite', 'mention' and 'reply'.",knownValues:["vote","repost","follow","invite","mention","reply"]},reasonSubject:{type:"string"},record:{type:"unknown"},isRead:{type:"boolean"},indexedAt:{type:"datetime"}}}}},AppBskyNotificationUpdateSeen:{lexicon:1,id:"app.bsky.notification.updateSeen",defs:{main:{type:"procedure",description:"Notify server that the user has seen notifications.",input:{encoding:"application/json",schema:{type:"object",required:["seenAt"],properties:{seenAt:{type:"datetime"}}}}}}},AppBskySystemActorUser:{lexicon:1,id:"app.bsky.system.actorUser",defs:{main:{type:"token",description:"Actor type: User. Defined for app.bsky.system.declaration's actorType."}}},AppBskySystemDeclRef:{lexicon:1,id:"app.bsky.system.declRef",defs:{main:{description:"A reference to a app.bsky.system.declaration record.",type:"object",required:["cid","actorType"],properties:{cid:{type:"string"},actorType:{type:"string",knownValues:["app.bsky.system.actorUser"]}}}}},AppBskySystemDeclaration:{lexicon:1,id:"app.bsky.system.declaration",defs:{main:{description:"Context for an account that is considered intrinsic to it and alters the fundamental understanding of an account of changed. A declaration should be treated as immutable.",type:"record",key:"literal:self",record:{type:"object",required:["actorType"],properties:{actorType:{type:"string",knownValues:["app.bsky.system.actorUser"]}}}}}}}),Rr=new fr(Ar),jr={};u(jr,{HandleNotAvailableError:()=>$r,InvalidHandleError:()=>Cr,InvalidInviteCodeError:()=>Sr,InvalidPasswordError:()=>Tr,toKnownErr:()=>Er});var Cr=class extends mt{constructor(e){super(e.status,e.error,e.message)}},Tr=class extends mt{constructor(e){super(e.status,e.error,e.message)}},Sr=class extends mt{constructor(e){super(e.status,e.error,e.message)}},$r=class extends mt{constructor(e){super(e.status,e.error,e.message)}};function Er(e){if(e instanceof mt){if("InvalidHandle"===e.error)return new Cr(e);if("InvalidPassword"===e.error)return new Tr(e);if("InvalidInviteCode"===e.error)return new Sr(e);if("HandleNotAvailable"===e.error)return new $r(e)}return e}var Ir={};function qr(e){return e}u(Ir,{toKnownErr:()=>qr});var Pr={};u(Pr,{ExpiredTokenError:()=>Dr,InvalidTokenError:()=>Br,toKnownErr:()=>Nr});var Dr=class extends mt{constructor(e){super(e.status,e.error,e.message)}},Br=class extends mt{constructor(e){super(e.status,e.error,e.message)}};function Nr(e){if(e instanceof mt){if("ExpiredToken"===e.error)return new Dr(e);if("InvalidToken"===e.error)return new Br(e)}return e}var Mr={};function Or(e){return e}u(Mr,{toKnownErr:()=>Or});var Zr={};function Vr(e){return e}u(Zr,{toKnownErr:()=>Vr});var Lr={};function Gr(e){return e}u(Lr,{toKnownErr:()=>Gr});var Kr={};u(Kr,{ExpiredTokenError:()=>Fr,InvalidTokenError:()=>Ur,toKnownErr:()=>Wr});var Fr=class extends mt{constructor(e){super(e.status,e.error,e.message)}},Ur=class extends mt{constructor(e){super(e.status,e.error,e.message)}};function Wr(e){if(e instanceof mt){if("ExpiredToken"===e.error)return new Fr(e);if("InvalidToken"===e.error)return new Ur(e)}return e}var zr={};function Hr(e){return e}u(zr,{toKnownErr:()=>Hr});var Jr={};function Xr(e){return e}u(Jr,{toKnownErr:()=>Xr});var Yr={};function Qr(e){return e}u(Yr,{toKnownErr:()=>Qr});var eo={};function to(e){return e}u(eo,{toKnownErr:()=>to});var ro={};function oo(e){return e}u(ro,{toKnownErr:()=>oo});var no={};function io(e){return e}u(no,{toKnownErr:()=>io});var ao={};function so(e){return e}u(ao,{toKnownErr:()=>so});var po={};function co(e){return e}u(po,{toKnownErr:()=>co});var uo={};function lo(e){return e}u(uo,{toKnownErr:()=>lo});var mo={};u(mo,{SubjectHasActionError:()=>yo,toKnownErr:()=>fo});var yo=class extends mt{constructor(e){super(e.status,e.error,e.message)}};function fo(e){return e instanceof mt&&"SubjectHasAction"===e.error?new yo(e):e}var ho={};function go(e){return e}u(ho,{toKnownErr:()=>go});var vo={};function bo(e){return e}u(vo,{toKnownErr:()=>bo});var wo={};function xo(e){return e}u(wo,{toKnownErr:()=>xo});var ko={};function _o(e){return"object"==typeof e&&null!==e}function Ao(e,t){return t in e}function Ro(e){return e}function jo(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.repo.batchWrite#create"===e.$type}function Co(e){return Rr.validate("com.atproto.repo.batchWrite#create",e)}function To(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.repo.batchWrite#update"===e.$type}function So(e){return Rr.validate("com.atproto.repo.batchWrite#update",e)}function $o(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.repo.batchWrite#delete"===e.$type}function Eo(e){return Rr.validate("com.atproto.repo.batchWrite#delete",e)}u(ko,{isCreate:()=>jo,isDelete:()=>$o,isUpdate:()=>To,toKnownErr:()=>Ro,validateCreate:()=>Co,validateDelete:()=>Eo,validateUpdate:()=>So});var Io={};function qo(e){return e}u(Io,{toKnownErr:()=>qo});var Po={};function Do(e){return e}u(Po,{toKnownErr:()=>Do});var Bo={};function No(e){return e}u(Bo,{toKnownErr:()=>No});var Mo={};function Oo(e){return e}u(Mo,{toKnownErr:()=>Oo});var Zo={};function Vo(e){return e}function Lo(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.repo.listRecords#record"===e.$type}function Go(e){return Rr.validate("com.atproto.repo.listRecords#record",e)}u(Zo,{isRecord:()=>Lo,toKnownErr:()=>Vo,validateRecord:()=>Go});var Ko={};function Fo(e){return e}u(Ko,{toKnownErr:()=>Fo});var Uo={};function Wo(e){return e}u(Uo,{toKnownErr:()=>Wo});var zo={};function Ho(e){return e}function Jo(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.server.getAccountsConfig#links"===e.$type}function Xo(e){return Rr.validate("com.atproto.server.getAccountsConfig#links",e)}u(zo,{isLinks:()=>Jo,toKnownErr:()=>Ho,validateLinks:()=>Xo});var Yo={};u(Yo,{AccountTakedownError:()=>Qo,toKnownErr:()=>en});var Qo=class extends mt{constructor(e){super(e.status,e.error,e.message)}};function en(e){return e instanceof mt&&"AccountTakedown"===e.error?new Qo(e):e}var tn={};function rn(e){return e}u(tn,{toKnownErr:()=>rn});var on={};function nn(e){return e}u(on,{toKnownErr:()=>nn});var an={};u(an,{AccountTakedownError:()=>sn,toKnownErr:()=>pn});var sn=class extends mt{constructor(e){super(e.status,e.error,e.message)}};function pn(e){return e instanceof mt&&"AccountTakedown"===e.error?new sn(e):e}var cn={};function dn(e){return e}u(cn,{toKnownErr:()=>dn});var un={};function ln(e){return e}u(un,{toKnownErr:()=>ln});var mn={};function yn(e){return e}u(mn,{toKnownErr:()=>yn});var fn={};function hn(e){return e}u(fn,{toKnownErr:()=>hn});var gn={};function vn(e){return e}u(gn,{toKnownErr:()=>vn});var bn={};function wn(e){return e}u(bn,{toKnownErr:()=>wn});var xn={};function kn(e){return e}u(xn,{toKnownErr:()=>kn});var _n={};function An(e){return e}u(_n,{toKnownErr:()=>An});var Rn={};function jn(e){return e}u(Rn,{toKnownErr:()=>jn});var Cn={};function Tn(e){return e}u(Cn,{toKnownErr:()=>Tn});var Sn={};function $n(e){return e}u(Sn,{toKnownErr:()=>$n});var En={};function In(e){return e}u(En,{toKnownErr:()=>In});var qn={};function Pn(e){return e}u(qn,{toKnownErr:()=>Pn});var Dn={};u(Dn,{BlobTooLargeError:()=>Nn,InvalidBlobError:()=>Bn,InvalidImageDimensionsError:()=>On,InvalidMimeTypeError:()=>Mn,toKnownErr:()=>Zn});var Bn=class extends mt{constructor(e){super(e.status,e.error,e.message)}},Nn=class extends mt{constructor(e){super(e.status,e.error,e.message)}},Mn=class extends mt{constructor(e){super(e.status,e.error,e.message)}},On=class extends mt{constructor(e){super(e.status,e.error,e.message)}};function Zn(e){if(e instanceof mt){if("InvalidBlob"===e.error)return new Bn(e);if("BlobTooLarge"===e.error)return new Nn(e);if("InvalidMimeType"===e.error)return new Mn(e);if("InvalidImageDimensions"===e.error)return new On(e)}return e}var Vn={};function Ln(e){return e}u(Vn,{toKnownErr:()=>Ln});var Gn={};u(Gn,{NotFoundError:()=>Kn,isNotFoundPost:()=>zn,isThreadViewPost:()=>Un,toKnownErr:()=>Fn,validateNotFoundPost:()=>Hn,validateThreadViewPost:()=>Wn});var Kn=class extends mt{constructor(e){super(e.status,e.error,e.message)}};function Fn(e){return e instanceof mt&&"NotFound"===e.error?new Kn(e):e}function Un(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.feed.getPostThread#threadViewPost"===e.$type}function Wn(e){return Rr.validate("app.bsky.feed.getPostThread#threadViewPost",e)}function zn(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.feed.getPostThread#notFoundPost"===e.$type}function Hn(e){return Rr.validate("app.bsky.feed.getPostThread#notFoundPost",e)}var Jn={};function Xn(e){return e}u(Jn,{toKnownErr:()=>Xn});var Yn={};function Qn(e){return e}u(Yn,{toKnownErr:()=>Qn});var ei={};function ti(e){return e}function ri(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.feed.getVotes#vote"===e.$type}function oi(e){return Rr.validate("app.bsky.feed.getVotes#vote",e)}u(ei,{isVote:()=>ri,toKnownErr:()=>ti,validateVote:()=>oi});var ni={};function ii(e){return e}u(ni,{toKnownErr:()=>ii});var ai={};function si(e){return e}u(ai,{toKnownErr:()=>si});var pi={};function ci(e){return e}u(pi,{toKnownErr:()=>ci});var di={};function ui(e){return e}u(di,{toKnownErr:()=>ui});var li={};function mi(e){return e}u(li,{toKnownErr:()=>mi});var yi={};function fi(e){return e}u(yi,{toKnownErr:()=>fi});var hi={};function gi(e){return e}u(hi,{toKnownErr:()=>gi});var vi={};function bi(e){return e}function wi(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.notification.list#notification"===e.$type}function xi(e){return Rr.validate("app.bsky.notification.list#notification",e)}u(vi,{isNotification:()=>wi,toKnownErr:()=>bi,validateNotification:()=>xi});var ki={};function _i(e){return e}u(ki,{toKnownErr:()=>_i});var Ai={};function Ri(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.blob#view"===e.$type}function ji(e){return Rr.validate("com.atproto.admin.blob#view",e)}function Ci(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.blob#imageDetails"===e.$type}function Ti(e){return Rr.validate("com.atproto.admin.blob#imageDetails",e)}function Si(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.blob#videoDetails"===e.$type}function $i(e){return Rr.validate("com.atproto.admin.blob#videoDetails",e)}function Ei(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.blob#moderation"===e.$type}function Ii(e){return Rr.validate("com.atproto.admin.blob#moderation",e)}u(Ai,{isImageDetails:()=>Ci,isModeration:()=>Ei,isVideoDetails:()=>Si,isView:()=>Ri,validateImageDetails:()=>Ti,validateModeration:()=>Ii,validateVideoDetails:()=>$i,validateView:()=>ji});var qi={};function Pi(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.moderationAction#view"===e.$type}function Di(e){return Rr.validate("com.atproto.admin.moderationAction#view",e)}function Bi(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.moderationAction#viewDetail"===e.$type}function Ni(e){return Rr.validate("com.atproto.admin.moderationAction#viewDetail",e)}function Mi(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.moderationAction#viewCurrent"===e.$type}function Oi(e){return Rr.validate("com.atproto.admin.moderationAction#viewCurrent",e)}function Zi(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.moderationAction#reversal"===e.$type}function Vi(e){return Rr.validate("com.atproto.admin.moderationAction#reversal",e)}u(qi,{ACKNOWLEDGE:()=>Ki,FLAG:()=>Gi,TAKEDOWN:()=>Li,isReversal:()=>Zi,isView:()=>Pi,isViewCurrent:()=>Mi,isViewDetail:()=>Bi,validateReversal:()=>Vi,validateView:()=>Di,validateViewCurrent:()=>Oi,validateViewDetail:()=>Ni});var Li="com.atproto.admin.moderationAction#takedown",Gi="com.atproto.admin.moderationAction#flag",Ki="com.atproto.admin.moderationAction#acknowledge",Fi={};function Ui(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.moderationReport#view"===e.$type}function Wi(e){return Rr.validate("com.atproto.admin.moderationReport#view",e)}function zi(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.moderationReport#viewDetail"===e.$type}function Hi(e){return Rr.validate("com.atproto.admin.moderationReport#viewDetail",e)}u(Fi,{isView:()=>Ui,isViewDetail:()=>zi,validateView:()=>Wi,validateViewDetail:()=>Hi});var Ji={};function Xi(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.record#view"===e.$type}function Yi(e){return Rr.validate("com.atproto.admin.record#view",e)}function Qi(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.record#viewDetail"===e.$type}function ea(e){return Rr.validate("com.atproto.admin.record#viewDetail",e)}function ta(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.record#moderation"===e.$type}function ra(e){return Rr.validate("com.atproto.admin.record#moderation",e)}function oa(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.record#moderationDetail"===e.$type}function na(e){return Rr.validate("com.atproto.admin.record#moderationDetail",e)}u(Ji,{isModeration:()=>ta,isModerationDetail:()=>oa,isView:()=>Xi,isViewDetail:()=>Qi,validateModeration:()=>ra,validateModerationDetail:()=>na,validateView:()=>Yi,validateViewDetail:()=>ea});var ia={};function aa(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.repo#view"===e.$type}function sa(e){return Rr.validate("com.atproto.admin.repo#view",e)}function pa(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.repo#viewDetail"===e.$type}function ca(e){return Rr.validate("com.atproto.admin.repo#viewDetail",e)}function da(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.repo#account"===e.$type}function ua(e){return Rr.validate("com.atproto.admin.repo#account",e)}function la(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.repo#moderation"===e.$type}function ma(e){return Rr.validate("com.atproto.admin.repo#moderation",e)}function ya(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.admin.repo#moderationDetail"===e.$type}function fa(e){return Rr.validate("com.atproto.admin.repo#moderationDetail",e)}u(ia,{isAccount:()=>da,isModeration:()=>la,isModerationDetail:()=>ya,isView:()=>aa,isViewDetail:()=>pa,validateAccount:()=>ua,validateModeration:()=>ma,validateModerationDetail:()=>fa,validateView:()=>sa,validateViewDetail:()=>ca});var ha={};function ga(e){return _o(e)&&Ao(e,"$type")&&("com.atproto.repo.recordRef#main"===e.$type||"com.atproto.repo.recordRef"===e.$type)}function va(e){return Rr.validate("com.atproto.repo.recordRef#main",e)}u(ha,{isMain:()=>ga,validateMain:()=>va});var ba={};function wa(e){return _o(e)&&Ao(e,"$type")&&("com.atproto.repo.repoRef#main"===e.$type||"com.atproto.repo.repoRef"===e.$type)}function xa(e){return Rr.validate("com.atproto.repo.repoRef#main",e)}u(ba,{isMain:()=>wa,validateMain:()=>xa});var ka={};function _a(e){return _o(e)&&Ao(e,"$type")&&("com.atproto.repo.strongRef#main"===e.$type||"com.atproto.repo.strongRef"===e.$type)}function Aa(e){return Rr.validate("com.atproto.repo.strongRef#main",e)}u(ka,{isMain:()=>_a,validateMain:()=>Aa});var Ra={};u(Ra,{OTHER:()=>Ca,SPAM:()=>ja});var ja="com.atproto.report.reasonType#spam",Ca="com.atproto.report.reasonType#other",Ta={};function Sa(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.report.subject#repo"===e.$type}function $a(e){return Rr.validate("com.atproto.report.subject#repo",e)}function Ea(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.report.subject#record"===e.$type}function Ia(e){return Rr.validate("com.atproto.report.subject#record",e)}function qa(e){return _o(e)&&Ao(e,"$type")&&"com.atproto.report.subject#recordRef"===e.$type}function Pa(e){return Rr.validate("com.atproto.report.subject#recordRef",e)}u(Ta,{isRecord:()=>Ea,isRecordRef:()=>qa,isRepo:()=>Sa,validateRecord:()=>Ia,validateRecordRef:()=>Pa,validateRepo:()=>$a});var Da={},Ba={};function Na(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.actor.profile#main"===e.$type||"app.bsky.actor.profile"===e.$type)}function Ma(e){return Rr.validate("app.bsky.actor.profile#main",e)}function Oa(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.actor.profile#view"===e.$type}function Za(e){return Rr.validate("app.bsky.actor.profile#view",e)}function Va(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.actor.profile#viewBasic"===e.$type}function La(e){return Rr.validate("app.bsky.actor.profile#viewBasic",e)}function Ga(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.actor.profile#viewerState"===e.$type}function Ka(e){return Rr.validate("app.bsky.actor.profile#viewerState",e)}function Fa(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.actor.profile#myState"===e.$type}function Ua(e){return Rr.validate("app.bsky.actor.profile#myState",e)}u(Ba,{isMyState:()=>Fa,isRecord:()=>Na,isView:()=>Oa,isViewBasic:()=>Va,isViewerState:()=>Ga,validateMyState:()=>Ua,validateRecord:()=>Ma,validateView:()=>Za,validateViewBasic:()=>La,validateViewerState:()=>Ka});var Wa={};function za(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.actor.ref#main"===e.$type||"app.bsky.actor.ref"===e.$type)}function Ha(e){return Rr.validate("app.bsky.actor.ref#main",e)}function Ja(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.actor.ref#withInfo"===e.$type}function Xa(e){return Rr.validate("app.bsky.actor.ref#withInfo",e)}function Ya(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.actor.ref#viewerState"===e.$type}function Qa(e){return Rr.validate("app.bsky.actor.ref#viewerState",e)}u(Wa,{isMain:()=>za,isViewerState:()=>Ya,isWithInfo:()=>Ja,validateMain:()=>Ha,validateViewerState:()=>Qa,validateWithInfo:()=>Xa});var es={};function ts(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.embed.external#main"===e.$type||"app.bsky.embed.external"===e.$type)}function rs(e){return Rr.validate("app.bsky.embed.external#main",e)}function os(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.embed.external#external"===e.$type}function ns(e){return Rr.validate("app.bsky.embed.external#external",e)}function is(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.embed.external#presented"===e.$type}function as(e){return Rr.validate("app.bsky.embed.external#presented",e)}function ss(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.embed.external#presentedExternal"===e.$type}function ps(e){return Rr.validate("app.bsky.embed.external#presentedExternal",e)}u(es,{isExternal:()=>os,isMain:()=>ts,isPresented:()=>is,isPresentedExternal:()=>ss,validateExternal:()=>ns,validateMain:()=>rs,validatePresented:()=>as,validatePresentedExternal:()=>ps});var cs={};function ds(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.embed.images#main"===e.$type||"app.bsky.embed.images"===e.$type)}function us(e){return Rr.validate("app.bsky.embed.images#main",e)}function ls(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.embed.images#image"===e.$type}function ms(e){return Rr.validate("app.bsky.embed.images#image",e)}function ys(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.embed.images#presented"===e.$type}function fs(e){return Rr.validate("app.bsky.embed.images#presented",e)}function hs(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.embed.images#presentedImage"===e.$type}function gs(e){return Rr.validate("app.bsky.embed.images#presentedImage",e)}u(cs,{isImage:()=>ls,isMain:()=>ds,isPresented:()=>ys,isPresentedImage:()=>hs,validateImage:()=>ms,validateMain:()=>us,validatePresented:()=>fs,validatePresentedImage:()=>gs});var vs={};function bs(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.embed.record#main"===e.$type||"app.bsky.embed.record"===e.$type)}function ws(e){return Rr.validate("app.bsky.embed.record#main",e)}function xs(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.embed.record#presented"===e.$type}function ks(e){return Rr.validate("app.bsky.embed.record#presented",e)}function _s(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.embed.record#presentedRecord"===e.$type}function As(e){return Rr.validate("app.bsky.embed.record#presentedRecord",e)}function Rs(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.embed.record#presentedNotFound"===e.$type}function js(e){return Rr.validate("app.bsky.embed.record#presentedNotFound",e)}u(vs,{isMain:()=>bs,isPresented:()=>xs,isPresentedNotFound:()=>Rs,isPresentedRecord:()=>_s,validateMain:()=>ws,validatePresented:()=>ks,validatePresentedNotFound:()=>js,validatePresentedRecord:()=>As});var Cs={};function Ts(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.feed.feedViewPost#main"===e.$type||"app.bsky.feed.feedViewPost"===e.$type)}function Ss(e){return Rr.validate("app.bsky.feed.feedViewPost#main",e)}function $s(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.feed.feedViewPost#replyRef"===e.$type}function Es(e){return Rr.validate("app.bsky.feed.feedViewPost#replyRef",e)}function Is(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.feed.feedViewPost#reasonRepost"===e.$type}function qs(e){return Rr.validate("app.bsky.feed.feedViewPost#reasonRepost",e)}u(Cs,{isMain:()=>Ts,isReasonRepost:()=>Is,isReplyRef:()=>$s,validateMain:()=>Ss,validateReasonRepost:()=>qs,validateReplyRef:()=>Es});var Ps={};function Ds(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.feed.post#main"===e.$type||"app.bsky.feed.post"===e.$type)}function Bs(e){return Rr.validate("app.bsky.feed.post#main",e)}function Ns(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.feed.post#replyRef"===e.$type}function Ms(e){return Rr.validate("app.bsky.feed.post#replyRef",e)}function Os(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.feed.post#entity"===e.$type}function Zs(e){return Rr.validate("app.bsky.feed.post#entity",e)}function Vs(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.feed.post#textSlice"===e.$type}function Ls(e){return Rr.validate("app.bsky.feed.post#textSlice",e)}function Gs(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.feed.post#view"===e.$type}function Ks(e){return Rr.validate("app.bsky.feed.post#view",e)}function Fs(e){return _o(e)&&Ao(e,"$type")&&"app.bsky.feed.post#viewerState"===e.$type}function Us(e){return Rr.validate("app.bsky.feed.post#viewerState",e)}u(Ps,{isEntity:()=>Os,isRecord:()=>Ds,isReplyRef:()=>Ns,isTextSlice:()=>Vs,isView:()=>Gs,isViewerState:()=>Fs,validateEntity:()=>Zs,validateRecord:()=>Bs,validateReplyRef:()=>Ms,validateTextSlice:()=>Ls,validateView:()=>Ks,validateViewerState:()=>Us});var Ws={};function zs(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.feed.repost#main"===e.$type||"app.bsky.feed.repost"===e.$type)}function Hs(e){return Rr.validate("app.bsky.feed.repost#main",e)}u(Ws,{isRecord:()=>zs,validateRecord:()=>Hs});var Js={};function Xs(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.feed.vote#main"===e.$type||"app.bsky.feed.vote"===e.$type)}function Ys(e){return Rr.validate("app.bsky.feed.vote#main",e)}u(Js,{isRecord:()=>Xs,validateRecord:()=>Ys});var Qs={};u(Qs,{MAIN:()=>ep});var ep="app.bsky.graph.assertCreator#main",tp={};u(tp,{MAIN:()=>rp});var rp="app.bsky.graph.assertMember#main",op={};function np(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.graph.assertion#main"===e.$type||"app.bsky.graph.assertion"===e.$type)}function ip(e){return Rr.validate("app.bsky.graph.assertion#main",e)}u(op,{isRecord:()=>np,validateRecord:()=>ip});var ap={};function sp(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.graph.confirmation#main"===e.$type||"app.bsky.graph.confirmation"===e.$type)}function pp(e){return Rr.validate("app.bsky.graph.confirmation#main",e)}u(ap,{isRecord:()=>sp,validateRecord:()=>pp});var cp={};function dp(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.graph.follow#main"===e.$type||"app.bsky.graph.follow"===e.$type)}function up(e){return Rr.validate("app.bsky.graph.follow#main",e)}u(cp,{isRecord:()=>dp,validateRecord:()=>up});var lp={};u(lp,{MAIN:()=>mp});var mp="app.bsky.system.actorUser#main",yp={};function fp(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.system.declRef#main"===e.$type||"app.bsky.system.declRef"===e.$type)}function hp(e){return Rr.validate("app.bsky.system.declRef#main",e)}u(yp,{isMain:()=>fp,validateMain:()=>hp});var gp={};function vp(e){return _o(e)&&Ao(e,"$type")&&("app.bsky.system.declaration#main"===e.$type||"app.bsky.system.declaration"===e.$type)}function bp(e){return Rr.validate("app.bsky.system.declaration#main",e)}u(gp,{isRecord:()=>vp,validateRecord:()=>bp});var wp={ModerationActionTakedown:"com.atproto.admin.moderationAction#takedown",ModerationActionFlag:"com.atproto.admin.moderationAction#flag",ModerationActionAcknowledge:"com.atproto.admin.moderationAction#acknowledge"},xp={ReasonTypeSpam:"com.atproto.report.reasonType#spam",ReasonTypeOther:"com.atproto.report.reasonType#other"},kp={AssertCreator:"app.bsky.graph.assertCreator",AssertMember:"app.bsky.graph.assertMember"},_p={ActorUser:"app.bsky.system.actorUser"},Ap=class{constructor(){this.xrpc=new xr,this.xrpc.addLexicons(Ar)}service(e){return new Rp(this,this.xrpc.service(e))}},Rp=class{constructor(e,t){this._baseClient=e,this.xrpc=t,this.com=new jp(this),this.app=new Np(this)}setHeader(e,t){this.xrpc.setHeader(e,t)}},jp=class{constructor(e){this._service=e,this.atproto=new Cp(e)}},Cp=class{constructor(e){this._service=e,this.account=new Tp(e),this.admin=new Sp(e),this.blob=new $p(e),this.handle=new Ep(e),this.repo=new Ip(e),this.report=new qp(e),this.server=new Pp(e),this.session=new Dp(e),this.sync=new Bp(e)}},Tp=class{constructor(e){this._service=e}create(e,t){return this._service.xrpc.call("com.atproto.account.create",t?.qp,e,t).catch((e=>{throw Er(e)}))}createInviteCode(e,t){return this._service.xrpc.call("com.atproto.account.createInviteCode",t?.qp,e,t).catch((e=>{throw e}))}delete(e,t){return this._service.xrpc.call("com.atproto.account.delete",t?.qp,e,t).catch((e=>{throw Nr(e)}))}get(e,t){return this._service.xrpc.call("com.atproto.account.get",e,void 0,t).catch((e=>{throw e}))}requestDelete(e,t){return this._service.xrpc.call("com.atproto.account.requestDelete",t?.qp,e,t).catch((e=>{throw e}))}requestPasswordReset(e,t){return this._service.xrpc.call("com.atproto.account.requestPasswordReset",t?.qp,e,t).catch((e=>{throw e}))}resetPassword(e,t){return this._service.xrpc.call("com.atproto.account.resetPassword",t?.qp,e,t).catch((e=>{throw Wr(e)}))}},Sp=class{constructor(e){this._service=e}getModerationAction(e,t){return this._service.xrpc.call("com.atproto.admin.getModerationAction",e,void 0,t).catch((e=>{throw e}))}getModerationActions(e,t){return this._service.xrpc.call("com.atproto.admin.getModerationActions",e,void 0,t).catch((e=>{throw e}))}getModerationReport(e,t){return this._service.xrpc.call("com.atproto.admin.getModerationReport",e,void 0,t).catch((e=>{throw e}))}getModerationReports(e,t){return this._service.xrpc.call("com.atproto.admin.getModerationReports",e,void 0,t).catch((e=>{throw e}))}getRecord(e,t){return this._service.xrpc.call("com.atproto.admin.getRecord",e,void 0,t).catch((e=>{throw e}))}getRepo(e,t){return this._service.xrpc.call("com.atproto.admin.getRepo",e,void 0,t).catch((e=>{throw e}))}resolveModerationReports(e,t){return this._service.xrpc.call("com.atproto.admin.resolveModerationReports",t?.qp,e,t).catch((e=>{throw e}))}reverseModerationAction(e,t){return this._service.xrpc.call("com.atproto.admin.reverseModerationAction",t?.qp,e,t).catch((e=>{throw e}))}searchRepos(e,t){return this._service.xrpc.call("com.atproto.admin.searchRepos",e,void 0,t).catch((e=>{throw e}))}takeModerationAction(e,t){return this._service.xrpc.call("com.atproto.admin.takeModerationAction",t?.qp,e,t).catch((e=>{throw fo(e)}))}},$p=class{constructor(e){this._service=e}upload(e,t){return this._service.xrpc.call("com.atproto.blob.upload",t?.qp,e,t).catch((e=>{throw e}))}},Ep=class{constructor(e){this._service=e}resolve(e,t){return this._service.xrpc.call("com.atproto.handle.resolve",e,void 0,t).catch((e=>{throw e}))}update(e,t){return this._service.xrpc.call("com.atproto.handle.update",t?.qp,e,t).catch((e=>{throw e}))}},Ip=class{constructor(e){this._service=e}batchWrite(e,t){return this._service.xrpc.call("com.atproto.repo.batchWrite",t?.qp,e,t).catch((e=>{throw e}))}createRecord(e,t){return this._service.xrpc.call("com.atproto.repo.createRecord",t?.qp,e,t).catch((e=>{throw e}))}deleteRecord(e,t){return this._service.xrpc.call("com.atproto.repo.deleteRecord",t?.qp,e,t).catch((e=>{throw e}))}describe(e,t){return this._service.xrpc.call("com.atproto.repo.describe",e,void 0,t).catch((e=>{throw e}))}getRecord(e,t){return this._service.xrpc.call("com.atproto.repo.getRecord",e,void 0,t).catch((e=>{throw e}))}listRecords(e,t){return this._service.xrpc.call("com.atproto.repo.listRecords",e,void 0,t).catch((e=>{throw e}))}putRecord(e,t){return this._service.xrpc.call("com.atproto.repo.putRecord",t?.qp,e,t).catch((e=>{throw e}))}},qp=class{constructor(e){this._service=e}create(e,t){return this._service.xrpc.call("com.atproto.report.create",t?.qp,e,t).catch((e=>{throw e}))}},Pp=class{constructor(e){this._service=e}getAccountsConfig(e,t){return this._service.xrpc.call("com.atproto.server.getAccountsConfig",e,void 0,t).catch((e=>{throw e}))}},Dp=class{constructor(e){this._service=e}create(e,t){return this._service.xrpc.call("com.atproto.session.create",t?.qp,e,t).catch((e=>{throw en(e)}))}delete(e,t){return this._service.xrpc.call("com.atproto.session.delete",t?.qp,e,t).catch((e=>{throw e}))}get(e,t){return this._service.xrpc.call("com.atproto.session.get",e,void 0,t).catch((e=>{throw e}))}refresh(e,t){return this._service.xrpc.call("com.atproto.session.refresh",t?.qp,e,t).catch((e=>{throw pn(e)}))}},Bp=class{constructor(e){this._service=e}getBlocks(e,t){return this._service.xrpc.call("com.atproto.sync.getBlocks",e,void 0,t).catch((e=>{throw e}))}getCheckout(e,t){return this._service.xrpc.call("com.atproto.sync.getCheckout",e,void 0,t).catch((e=>{throw e}))}getCommitPath(e,t){return this._service.xrpc.call("com.atproto.sync.getCommitPath",e,void 0,t).catch((e=>{throw e}))}getHead(e,t){return this._service.xrpc.call("com.atproto.sync.getHead",e,void 0,t).catch((e=>{throw e}))}getRecord(e,t){return this._service.xrpc.call("com.atproto.sync.getRecord",e,void 0,t).catch((e=>{throw e}))}getRepo(e,t){return this._service.xrpc.call("com.atproto.sync.getRepo",e,void 0,t).catch((e=>{throw e}))}notifyOfUpdate(e,t){return this._service.xrpc.call("com.atproto.sync.notifyOfUpdate",e,void 0,t).catch((e=>{throw e}))}requestCrawl(e,t){return this._service.xrpc.call("com.atproto.sync.requestCrawl",e,void 0,t).catch((e=>{throw e}))}},Np=class{constructor(e){this._service=e,this.bsky=new Mp(e)}},Mp=class{constructor(e){this._service=e,this.actor=new Op(e),this.embed=new Vp(e),this.feed=new Lp(e),this.graph=new Up(e),this.notification=new Jp(e),this.system=new Xp(e)}},Op=class{constructor(e){this._service=e,this.profile=new Zp(e)}getProfile(e,t){return this._service.xrpc.call("app.bsky.actor.getProfile",e,void 0,t).catch((e=>{throw e}))}getProfiles(e,t){return this._service.xrpc.call("app.bsky.actor.getProfiles",e,void 0,t).catch((e=>{throw e}))}getSuggestions(e,t){return this._service.xrpc.call("app.bsky.actor.getSuggestions",e,void 0,t).catch((e=>{throw e}))}search(e,t){return this._service.xrpc.call("app.bsky.actor.search",e,void 0,t).catch((e=>{throw e}))}searchTypeahead(e,t){return this._service.xrpc.call("app.bsky.actor.searchTypeahead",e,void 0,t).catch((e=>{throw e}))}updateProfile(e,t){return this._service.xrpc.call("app.bsky.actor.updateProfile",t?.qp,e,t).catch((e=>{throw Zn(e)}))}},Zp=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.actor.profile",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.actor.profile",...e})).data}async create(e,t,r){return t.$type="app.bsky.actor.profile",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.actor.profile",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.actor.profile",...e},{headers:t})}},Vp=class{constructor(e){this._service=e}},Lp=class{constructor(e){this._service=e,this.post=new Gp(e),this.repost=new Kp(e),this.vote=new Fp(e)}getAuthorFeed(e,t){return this._service.xrpc.call("app.bsky.feed.getAuthorFeed",e,void 0,t).catch((e=>{throw e}))}getPostThread(e,t){return this._service.xrpc.call("app.bsky.feed.getPostThread",e,void 0,t).catch((e=>{throw Fn(e)}))}getRepostedBy(e,t){return this._service.xrpc.call("app.bsky.feed.getRepostedBy",e,void 0,t).catch((e=>{throw e}))}getTimeline(e,t){return this._service.xrpc.call("app.bsky.feed.getTimeline",e,void 0,t).catch((e=>{throw e}))}getVotes(e,t){return this._service.xrpc.call("app.bsky.feed.getVotes",e,void 0,t).catch((e=>{throw e}))}setVote(e,t){return this._service.xrpc.call("app.bsky.feed.setVote",t?.qp,e,t).catch((e=>{throw e}))}},Gp=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.post",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.post",...e})).data}async create(e,t,r){return t.$type="app.bsky.feed.post",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.post",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.post",...e},{headers:t})}},Kp=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.repost",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.repost",...e})).data}async create(e,t,r){return t.$type="app.bsky.feed.repost",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.repost",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.repost",...e},{headers:t})}},Fp=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.vote",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.vote",...e})).data}async create(e,t,r){return t.$type="app.bsky.feed.vote",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.vote",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.vote",...e},{headers:t})}},Up=class{constructor(e){this._service=e,this.assertion=new Wp(e),this.confirmation=new zp(e),this.follow=new Hp(e)}getFollowers(e,t){return this._service.xrpc.call("app.bsky.graph.getFollowers",e,void 0,t).catch((e=>{throw e}))}getFollows(e,t){return this._service.xrpc.call("app.bsky.graph.getFollows",e,void 0,t).catch((e=>{throw e}))}getMutes(e,t){return this._service.xrpc.call("app.bsky.graph.getMutes",e,void 0,t).catch((e=>{throw e}))}mute(e,t){return this._service.xrpc.call("app.bsky.graph.mute",t?.qp,e,t).catch((e=>{throw e}))}unmute(e,t){return this._service.xrpc.call("app.bsky.graph.unmute",t?.qp,e,t).catch((e=>{throw e}))}},Wp=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.assertion",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.assertion",...e})).data}async create(e,t,r){return t.$type="app.bsky.graph.assertion",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.assertion",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.assertion",...e},{headers:t})}},zp=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.confirmation",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.confirmation",...e})).data}async create(e,t,r){return t.$type="app.bsky.graph.confirmation",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.confirmation",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.confirmation",...e},{headers:t})}},Hp=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.follow",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.follow",...e})).data}async create(e,t,r){return t.$type="app.bsky.graph.follow",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.follow",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.follow",...e},{headers:t})}},Jp=class{constructor(e){this._service=e}getCount(e,t){return this._service.xrpc.call("app.bsky.notification.getCount",e,void 0,t).catch((e=>{throw e}))}list(e,t){return this._service.xrpc.call("app.bsky.notification.list",e,void 0,t).catch((e=>{throw e}))}updateSeen(e,t){return this._service.xrpc.call("app.bsky.notification.updateSeen",t?.qp,e,t).catch((e=>{throw e}))}},Xp=class{constructor(e){this._service=e,this.declaration=new Yp(e)}},Yp=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.system.declaration",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.system.declaration",...e})).data}async create(e,t,r){return t.$type="app.bsky.system.declaration",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.system.declaration",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.system.declaration",...e},{headers:t})}},Qp=class{static configure(e){Qp.fetch=e.fetch}constructor(e){this.service=e.service instanceof URL?e.service:new URL(e.service),this._persistSession=e.persistSession,this._baseClient=new Ap,this._baseClient.xrpc.fetch=this._fetch.bind(this),this.api=this._baseClient.service(e.service)}get hasSession(){return!!this.session}setPersistSessionHandler(e){this._persistSession=e}async createAccount(e){try{const t=await this.api.com.atproto.account.create({handle:e.handle,password:e.password,email:e.email,inviteCode:e.inviteCode});return this.session={accessJwt:t.data.accessJwt,refreshJwt:t.data.refreshJwt,handle:t.data.handle,did:t.data.did},t}catch(e){throw this.session=void 0,e}finally{this.session?this._persistSession?.("create",this.session):this._persistSession?.("create-failed",void 0)}}async login(e){try{const t=await this.api.com.atproto.session.create({identifier:e.identifier,password:e.password});return this.session={accessJwt:t.data.accessJwt,refreshJwt:t.data.refreshJwt,handle:t.data.handle,did:t.data.did},t}catch(e){throw this.session=void 0,e}finally{this.session?this._persistSession?.("create",this.session):this._persistSession?.("create-failed",void 0)}}async resumeSession(e){try{this.session=e;const t=await this.api.com.atproto.session.get();if(!t.success||t.data.did!==this.session.did)throw new Error("Invalid session");return t}catch(e){throw this.session=void 0,e}finally{this.session?this._persistSession?.("create",this.session):this._persistSession?.("create-failed",void 0)}}_addAuthHeader(e){return!e.authorization&&this.session?.accessJwt?{...e,authorization:`Bearer ${this.session.accessJwt}`}:e}async _fetch(e,t,r,o){if(!Qp.fetch)throw new Error("AtpAgent fetch() method not configured");await this._refreshSessionPromise;let n=await Qp.fetch(e,t,this._addAuthHeader(r),o);return tc(n,["ExpiredToken"])&&this.session?.refreshJwt&&(await this._refreshSession(),n=await Qp.fetch(e,t,this._addAuthHeader(r),o)),n}async _refreshSession(){if(this._refreshSessionPromise)return this._refreshSessionPromise;this._refreshSessionPromise=this._refreshSessionInner();try{await this._refreshSessionPromise}finally{this._refreshSessionPromise=void 0}}async _refreshSessionInner(){if(!Qp.fetch)throw new Error("AtpAgent fetch() method not configured");if(!this.session?.refreshJwt)return;const e=new URL(this.service.origin);e.pathname="/xrpc/com.atproto.session.refresh";const t=await Qp.fetch(e.toString(),"POST",{authorization:`Bearer ${this.session.refreshJwt}`},void 0);tc(t,["ExpiredToken","InvalidToken"])?(this.session=void 0,this._persistSession?.("expired",void 0)):function(e,t){try{return e.xrpc.lex.assertValidXrpcOutput("com.atproto.session.refresh",t),!0}catch{return!1}}(this._baseClient,t.body)&&(this.session={accessJwt:t.body.accessJwt,refreshJwt:t.body.refreshJwt,handle:t.body.handle,did:t.body.did},this._persistSession?.("update",this.session))}},ec=Qp;function tc(e,t){return 400===e.status&&(r=e.body,!!ct.safeParse(r).success&&"string"==typeof e.body.error&&t.includes(e.body.error));var r}ec.fetch=_r},519:function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function a(e){try{p(o.next(e))}catch(e){i(e)}}function s(e){try{p(o.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}p((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(p){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){a.label=s[1];break}if(6===s[0]&&a.label<n[1]){a.label=n[1],n=s;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(s);break}n[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}};t.__esModule=!0;var i,a,s,p,c=r(890);i=new Intl.DateTimeFormat("ja-jp",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),a=document.getElementById("gettl"),s=document.getElementById("getprofile"),p=document.getElementById("setprofile"),a.addEventListener("click",(function(){document.getElementById("log").textContent="",document.getElementById("error").textContent="";var e=document.getElementById("service"),t=document.getElementById("email"),r=document.getElementById("password");e.value&&t.value&&r.value&&(document.getElementById("log").textContent="取得中・・・",a.disabled=!0,o(void 0,void 0,void 0,(function(){var o,a,s,p,d,u,l,m,y,f,h;return n(this,(function(n){switch(n.label){case 0:return[4,(o=new c.AtpAgent({service:"https://"+e.value})).login({identifier:t.value,password:r.value})];case 1:return n.sent(),(a=document.getElementById("tl")).innerHTML="",[4,o.api.app.bsky.feed.getTimeline({})];case 2:for(s=n.sent(),p=0,d=s.data.feed;p<d.length;p++)u=d[p],console.log(u),(l=document.createElement("dt")).textContent=u.post.author.displayName+" "+u.post.author.handle+" "+i.format(new Date(u.post.indexedAt)),u.post.author.avatar&&((m=document.createElement("img")).setAttribute("src",u.post.author.avatar),m.setAttribute("width","50"),m.setAttribute("height","50"),l.prepend(m)),y=document.createElement("dd"),(f=document.createElement("p")).textContent=u.post.record.text,(h=document.createElement("p")).textContent="☜"+u.post.replyCount+" 🔁"+u.post.repostCount+" ❤"+u.post.upvoteCount,y.appendChild(f),y.appendChild(h),a.appendChild(l),a.appendChild(y);return[2]}}))})).then((function(){console.log("fin"),a.disabled=!1,document.getElementById("log").textContent="complete",document.getElementById("error").textContent=""})).catch((function(e){console.error(e),a.disabled=!1,document.getElementById("log").textContent="",document.getElementById("error").textContent=e.message})))})),s.addEventListener("click",(function(){document.getElementById("log").textContent="",document.getElementById("error").textContent="";var e=document.getElementById("service"),t=document.getElementById("email"),r=document.getElementById("password"),i=document.getElementById("account");e.value&&t.value&&r.value&&i.value&&(document.getElementById("log").textContent="取得中・・・",s.disabled=!0,o(void 0,void 0,void 0,(function(){var o,a,s,p,d,u,l;return n(this,(function(n){switch(n.label){case 0:return o=new c.AtpAgent({service:"https://"+e.value}),a=i.value+"."+e.value,[4,o.login({identifier:t.value,password:r.value})];case 1:return n.sent(),[4,o.api.app.bsky.actor.getProfile({actor:a})];case 2:return s=n.sent(),(p=document.getElementById("avatar-dt")).innerHTML="",(d=document.getElementById("banner-dt")).innerHTML="",(u=document.createElement("img")).setAttribute("src",s.data.avatar||""),u.setAttribute("width","50"),p.appendChild(u),(l=document.createElement("img")).setAttribute("src",s.data.banner||""),l.setAttribute("width","400"),d.appendChild(l),document.getElementById("avatar").value=s.data.avatar||"",document.getElementById("banner").value=s.data.banner||"",document.getElementById("displayname").value=s.data.displayName||"",document.getElementById("description").value=s.data.description||"",console.log(s),[2]}}))})).then((function(){console.log("fin"),s.disabled=!1,document.getElementById("log").textContent="complete",document.getElementById("error").textContent=""})).catch((function(e){console.error(e),s.disabled=!1,document.getElementById("log").textContent="",document.getElementById("error").textContent=e.message})))})),p.addEventListener("click",(function(){document.getElementById("log").textContent="",document.getElementById("error").textContent="";var e=document.getElementById("service"),t=document.getElementById("email"),r=document.getElementById("password"),i=document.getElementById("account");e.value&&t.value&&r.value&&i.value&&(document.getElementById("log").textContent="設定中・・・",p.disabled=!0,o(void 0,void 0,void 0,(function(){var o,a,s,p,d,u,l,m,y,f,h,g,v,b,w,x;return n(this,(function(n){switch(n.label){case 0:return o=new c.AtpAgent({service:"https://"+e.value}),i.value,e.value,[4,o.login({identifier:t.value,password:r.value})];case 1:return n.sent(),a=document.getElementById("avatar"),s=document.getElementById("banner"),p=document.getElementById("displayname"),d=document.getElementById("description"),[4,fetch(a.value)];case 2:return u=n.sent(),l=u.headers.get("content-type")||"",[4,u.blob()];case 3:case 7:return[4,n.sent().arrayBuffer()];case 4:return m=n.sent(),y=new Uint8Array(m),[4,o.api.com.atproto.blob.upload(y,{encoding:l})];case 5:return f=n.sent(),[4,fetch(s.value)];case 6:return h=n.sent(),g=h.headers.get("content-type")||"",[4,h.blob()];case 8:return v=n.sent(),b=new Uint8Array(v),[4,o.api.com.atproto.blob.upload(b,{encoding:g})];case 9:return w=n.sent(),[4,o.api.app.bsky.actor.updateProfile({displayName:p.value,description:d.value,avatar:{cid:f.data.cid,mimeType:l},banner:{cid:w.data.cid,mimeType:g}})];case 10:return x=n.sent(),console.log(x),[2]}}))})).then((function(){console.log("fin"),p.disabled=!1,document.getElementById("log").textContent="complete",document.getElementById("error").textContent=""})).catch((function(e){console.error(e),p.disabled=!1,document.getElementById("log").textContent="",document.getElementById("error").textContent=e.message})))}))}},t={};!function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,r),i.exports}(519)})();